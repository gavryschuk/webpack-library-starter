!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("wordsai",[],e):"object"==typeof exports?exports.wordsai=e():t.wordsai=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){"use strict";e.__esModule=!0;var r=i(1);e.NODE_SEP=";",e.STRING_SEP=",",e.TERMINAL_PREFIX="!",e.MIN_LETTER="a",e.MAX_LETTER="z",e.MAX_WORD=new Array(10).join(e.MAX_LETTER);var n=new RegExp("(["+e.MIN_LETTER+"-"+e.MAX_LETTER+"]+)("+e.STRING_SEP+"|[0-9A-Z]+|$)","g"),o=new RegExp("([0-9A-Z]+):([0-9A-Z]+)"),s=function(){function t(t){for(this.syms=[],this.nodes=t.split(e.NODE_SEP),this.syms=[],this.symCount=0;;){var i=o.exec(this.nodes[this.symCount]);if(!i)break;if(r.fromAlphaCode(i[1])!==this.symCount)throw new Error("Invalid Symbol name - found "+i[1]+" when expecting "+r.toAlphaCode(this.symCount));this.syms[this.symCount]=r.fromAlphaCode(i[2]),this.symCount++}this.nodes.splice(0,this.symCount)}return t.prototype.isWord=function(t){return""!==t&&this.match(t)===t},t.prototype.match=function(t){var e=this.matches(t);return 0===e.length?"":e[e.length-1]},t.prototype.matches=function(t){return this.words(t,t+e.MIN_LETTER)},t.prototype.completions=function(t,i){return this.words(t,function(t){if(0===t.length)return e.MAX_WORD;var i=t.charCodeAt(t.length-1);return t.slice(0,-1)+String.fromCharCode(i+1)}(t),i)},t.prototype.words=function(t,i,r){var n=[];return this.enumerate(0,"",{from:t,beyond:i,fn:function(t,e){void 0!==r&&n.length>=r?e.abort=!0:n.push(t)},prefixes:t+e.MIN_LETTER===i}),n},t.prototype.enumerate=function(t,i,r){var o=this,s=this.nodes[t];function a(t){r.prefixes?t===r.from.slice(0,t.length)&&r.fn(t,r):r.from<=t&&t<r.beyond&&r.fn(t,r)}if(s[0]===e.TERMINAL_PREFIX){if(a(i),r.abort)return;s=s.slice(1)}s.replace(n,function(n,s,u){var h=i+s;return r.abort||h>=r.beyond||h<r.from.slice(0,h.length)?"":u===e.STRING_SEP||""===u?(a(h),""):(o.enumerate(o.inodeFromRef(u,t),h,r),"")})},t.prototype.inodeFromRef=function(t,e){var i=r.fromAlphaCode(t);return i<this.symCount?this.syms[i]:e+(i-=this.symCount)+1},t}();e.PTrie=s},function(t,e,i){"use strict";e.__esModule=!0,e.BASE=36;var r=function(){return function(){}}();e.PTrie=r,e.toAlphaCode=function(t){for(var i="",r=1,n=e.BASE;t>=n;t-=n,r++,n*=e.BASE);for(;r--;){var o=t%e.BASE;i=String.fromCharCode((o<10?48:55)+o)+i,t=(t-o)/e.BASE}return i},e.fromAlphaCode=function(t){for(var i=0,r=1,n=e.BASE;r<t.length;i+=n,r++,n*=e.BASE);for(var o=t.length-1,s=1;o>=0;o--,s*=e.BASE){var a=t.charCodeAt(o)-48;a>10&&(a-=7),i+=a*s}return i}},function(t,e,i){"use strict";function r(t,e,i){void 0===i&&(i="asc");var r=0;return t<e?r=-1:t>e&&(r=1),"asc"===i?r:-r}e.__esModule=!0,e.sortByValues=function(t,e){void 0===e&&(e="asc");var i=[];for(var n in t)i.push([n,t[n]]);return i.sort(function(t,i){return r(t[1],i[1],e)}),i},e.unique=function(t,e){void 0===e&&(e=r),t.sort(e);for(var i=1;i<t.length;i++)0===e(t[i-1],t[i])&&t.splice(i,1)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(i(4)),n=o(i(9));function o(t){return t&&t.__esModule?t:{default:t}}var s={BE:r.default,FE:n.default};e.default=s,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(5);function n(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mainDictionary=null,this._dictionaries={}}return s(t,[{key:"getMainDictionary",value:function(){return this._mainDictionary}},{key:"getSecondaryDictionaries",value:function(){return Object.keys(this._dictionaries)}},{key:"alphabet",get:function(){if(!this._a){this._a=[];for(var t="a".charCodeAt(0),e="z".charCodeAt(0);t<=e;++t)this._a.push(String.fromCharCode(t))}return this._a}}]),s(t,[{key:"loadMainDictionary",value:function(t){var e=new r.Trie(t);this._mainDictionary=new r.PTrie(e.pack())}},{key:"loadSecondaryDictionary",value:function(t,e){this._addDictionary(t,e)}},{key:"getHint",value:function(t,e){var i=this;if(!this._mainDictionary||!Object.keys(this._dictionaries).length)return console.log("BE: there are some dictionaries absent in BE"),null;e in this._dictionaries||(console.log("BE: dictionary name is absent in secondary dictionaries list. Used main dictionary instead."),e="main");var r=[];return t.forEach(function(t){var n=i._getWordsByRegExp(t,e);n.length&&(r=r.concat(n))},this),r.sort(function(t,e){return e.length-t.length}),r}},{key:"getWordStats",value:function(t,e){var i=!1,r=0,o=this._getLetterID([].concat(n(t))[0]),s=this._getWordsArrayByLetterID(o);return s.indexOf(t)>=0&&(i=!0),e&&(s=this._getWordsArrayByLetterID(o,e)).indexOf(t)>=0&&(r=t.length),{exists:i,points:r}}},{key:"_addDictionary",value:function(t,e){if(!(t in this._dictionaries)){var i=new r.Trie(e);this._dictionaries[t]=new r.PTrie(i.pack())}}},{key:"_getWordsByRegExp",value:function(t,e){for(var i=[],r=Math.floor(Math.random()*(this.alphabet.length-2)),n=new RegExp(t),o=0;o<this.alphabet.length;o++){this._getWordsArrayByLetterID(r,e).forEach(function(t){t.match(n)&&i.push(t)},this),r=r+o<this.alphabet.length-1?r+o:0}return i}},{key:"_getWordsArrayByLetterID",value:function(t,e){var i,r=this.alphabet[t],n=this.alphabet[t<this.alphabet.length-1?t+1:0],o=this._mainDictionary;return e in this._dictionaries&&(o=this._dictionaries[e]),i=o.words(r,n),o=null,i}},{key:"_getLetterID",value:function(t){for(var e=0;e<this.alphabet.length;e++)if(this.alphabet[e].toLowerCase()===t.toLowerCase())return e;return 0}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var r=i(6);e.Trie=r.Trie;var n=i(0);e.PTrie=n.PTrie},function(t,e,i){"use strict";e.__esModule=!0;var r=i(0),n=i(1),o=i(7),s=i(2),a=i(8),u=!1,h=function(){function t(t){this.root=new a.Node,this.lastWord="",this.suffixes={},this.cNext=1,this.wordCount=0,this.vCur=0,this.insertWords(t)}return t.prototype.insertWords=function(t){var e;if(void 0!==t){for("string"==typeof t&&(t=t.split(/[^a-zA-Z]+/)),e=0;e<t.length;e++)t[e]=t[e].toLowerCase();for(s.unique(t),e=0;e<t.length;e++)this.insert(t[e])}},t.prototype.insert=function(t){this._insert(t,this.root);var e=this.lastWord;if(this.lastWord=t,l(t,e)!==e){var i=this.uniqueNode(e,t,this.root);i&&this.combineSuffixNode(i)}},t.prototype._insert=function(t,e){var i,r,n;if(0!==t.length){for(n in e)if(e.hasOwnProperty(n)&&0!==(i=l(t,n)).length){if(n===i&&a.Node.isNode(e.child(n)))return void this._insert(t.slice(i.length),e.child(n));if(n===t&&e.isTerminalString(n))return;return(r=new a.Node).setChild(n.slice(i.length),e.child(n)),this.addTerminal(r,t=t.slice(i.length)),e.deleteChild(n),e.setChild(i,r),void this.wordCount++}this.addTerminal(e,t),this.wordCount++}},t.prototype.addTerminal=function(t,e){if(e.length<=1)t.setChild(e,1);else{var i=new a.Node;t.setChild(e[0],i),this.addTerminal(i,e.slice(1))}},t.prototype.optimize=function(){this.combineSuffixNode(this.root),this.prepDFS(),this.countDegree(this.root),this.prepDFS(),this.collapseChains(this.root)},t.prototype.combineSuffixNode=function(t){if(t._c)return t;var e=[];t.isTerminal()&&e.push("!");for(var i=t.props(),r=0;r<i.length;r++){var n=i[r];a.Node.isNode(t.child(n))?(t.setChild(n,this.combineSuffixNode(t.child(n))),e.push(n),e.push(t.child(n)._c)):e.push(n)}var o=e.join("-"),s=this.suffixes[o];return s||(this.suffixes[o]=t,t._c=this.cNext++,t)},t.prototype.prepDFS=function(){this.vCur++},t.prototype.visited=function(t){if(t._v===this.vCur)return!0;t._v=this.vCur},t.prototype.countDegree=function(t){if(void 0===t._d&&(t._d=0),t._d++,!this.visited(t))for(var e=t.props(!0),i=0;i<e.length;i++)this.countDegree(t.child(e[i]))},t.prototype.collapseChains=function(t){var e,i,r="-invalid-";if(!this.visited(t)){for(e=t.props(),i=0;i<e.length;i++){r=e[i];var n=t.child(r);a.Node.isNode(n)&&(this.collapseChains(n),void 0===n._g||1!==n._d&&1!==n._g.length||(t.deleteChild(r),r+=n._g,t.setChild(r,n.child(n._g))))}1!==e.length||t.isTerminal()||(t._g=r)}},t.prototype.isWord=function(t){return this.isFragment(t,this.root)},t.prototype.isFragment=function(t,e){if(0===t.length)return e.isTerminal();if(1===e.child(t))return!0;for(var i=e.props(!0),r=0;r<i.length;r++){var n=i[r];if(n===t.slice(0,n.length))return this.isFragment(t.slice(n.length),e.child(n))}return!1},t.prototype.uniqueNode=function(t,e,i){for(var r=i.props(!0),n=0;n<r.length;n++){var o=r[n];if(o===t.slice(0,o.length))return o!==e.slice(0,o.length)?i.child(o):this.uniqueNode(t.slice(o.length),e.slice(o.length),i.child(o))}},t.prototype.pack=function(){var t,e=this,i=[],s={},a=0;function u(t){var e="",i="";t.isTerminal()&&(e+=r.TERMINAL_PREFIX);for(var o=t.props(),a=0;a<o.length;a++){var u=o[a];if(t.isTerminalString(u))e+=i+u,i=r.STRING_SEP;else{var h=t.child(u);if(s[h._n])e+=i+u+s[h._n],i="";else{var l=n.toAlphaCode(t._n-h._n-1+d);h._g&&l.length>=h._g.length&&t.isTerminalString(h._g)?(e+=i+u+(l=h._g),i=r.STRING_SEP):(e+=i+u+l,i="")}}}return e}this.optimize();var h=new o.Histogram,l=new o.Histogram;!function t(e){if(void 0===e._n){for(var r=e.props(!0),n=0;n<r.length;n++)t(e.child(r[n]));e._n=a++,i.unshift(e)}}(this.root),t=i.length,this.prepDFS(),function t(i){if(!e.visited(i))for(var r=i.props(!0),o=0;o<r.length;o++){var s=r[o],a=i.child(s),u=i._n-a._n-1;u<n.BASE&&l.add(u),h.add(a._n,n.toAlphaCode(u).length-1),t(a)}}(this.root);for(var f=function(){var e=h.highest(n.BASE),i=[];i[-1]=0;for(var r=0,o=0,s=3+n.toAlphaCode(t).length,a=0;a<n.BASE&&void 0!==e[a];a++)i[a]=e[a][1]-s-l.countOf(n.BASE-a-1)+i[a-1],c("savings["+a+"] "+i[a]+" = "+i[a-1]+" +"+e[a][1]+" - "+s+" - "+l.countOf(n.BASE-a-1)+")"),i[a]>=r&&(r=i[a],o=a+1);return[o,e]}(),d=f[0],p=f[1],_=0;_<d;_++)s[p[_][0]]=n.toAlphaCode(_);for(var v=[],g=0;g<t;g++)v[g]=u(i[g]);for(_=d-1;_>=0;_--)v.unshift(n.toAlphaCode(_)+":"+n.toAlphaCode(t-parseInt(p[_][0],10)-1));return v.join(r.NODE_SEP)},t}();function l(t,e){var i,r=Math.min(t.length,e.length);for(i=0;i<r&&t[i]===e[i];i++);return t.slice(0,i)}function c(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];u&&console.log.apply(console,[t].concat(e))}e.Trie=h},function(t,e,i){"use strict";e.__esModule=!0;var r=i(2),n=function(){function t(){this.counts={}}return t.prototype.init=function(t,e){void 0===e&&(e=0),"number"==typeof t&&(t=t.toString()),void 0===this.counts[t]&&(this.counts[t]=0),this.counts[t]+=e},t.prototype.add=function(t,e){void 0===e&&(e=1),this.init(t,e)},t.prototype.countOf=function(t){return this.init(t),this.counts[t]},t.prototype.highest=function(t){return r.sortByValues(this.counts,"desc").slice(0,t)},t}();e.Histogram=n},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(){this._p=0}return t.prototype.child=function(t){return this[t]},t.prototype.setChild=function(t,e){this._g,void 0!==this[t]&&(this._p+=1),this._p,this[t]=e},t.prototype.deleteChild=function(t){this._g,this._p-=1,delete this[t],this._p},t.prototype.isTerminalString=function(t){return"number"==typeof this.child(t)},t.prototype.isTerminal=function(){return this.isTerminalString("")},t.prototype.props=function(e){var i=[];for(var r in this)this.hasOwnProperty(r)&&""!==r&&"_"!==r[0]&&(e&&!t.isNode(this.child(r))||i.push(r));return i.sort(),i},t.countDegree=function(t){new n(t).dfs(function(t,e){"post"!==t&&(void 0===e._d&&(e._d=0),e._d++)})},t.prototype.isSingleton=function(){return 1===this._p&&!this.isTerminal()},t.isNode=function(e){return e instanceof t},t}();e.Node=r;var n=function(){function t(t){this.root=t,this.visitMap=new Map}return t.prototype.reset=function(){return this.visitMap=new Map,this},t.prototype.visit=function(t){this.visitMap.set(t,!0)},t.prototype.visited=function(t){return this.visitMap.get(t)||!1},t.prototype.dfs=function(t){this.reset(),this._dfs(this.root,null,"",t)},t.prototype._dfs=function(t,e,i,r){if(r("pre",t,e,i),!this.visited(t)){this.visit(t);for(var n=0,o=t.props(!0);n<o.length;n++){var s=o[n];this._dfs(t.child(s),t,s,r)}r("post",t,e,i)}},t}();e.Walker=n},function(t,e,i){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endBoard()}return o(t,[{key:"defaultBoardSize",get:function(){return 11}},{key:"boardSize",get:function(){return this._boardSize}},{key:"usedWords",get:function(){return this._usedWords}},{key:"board",get:function(){return this._board}},{key:"points",get:function(){return this._points}}]),o(t,[{key:"startBoard",value:function(t){this.endBoard(),this._boardSize=t,this._cleanBoard()}},{key:"endBoard",value:function(){this._points=0,this._boardSize=0,this._usedWords=[],this._cleanBoard()}},{key:"getPossibleWordRegExp",value:function(){var t=[];if(!this._usedWords.length)return t.push("^([a-z]{3,"+Math.ceil(.5*this._boardSize)+"})$"),t;for(var e=0;e<this._boardSize;e++)for(var i=0;i<this._boardSize;i++){var r=this._board[e][i];if(this._isAString(r))this._findPossibleRegExp(i,e).forEach(function(e){t.push(e)})}return t}},{key:"checkPossibleCells",value:function(t,e,i,r){if(t<0||e<0||(i?e:t)+r>this._boardSize)return!1;for(var n=0,o=0,s=0;s<r;s++){var a=i?t:t+s,u=i?e+s:e,h=this._board[u][a];this._isAString(h)?o++:(h>=3||i&&1===h||!i&&2===h)&&n++}return i&&e&&this._isAString(this._board[e-1][t])&&n++,!i&&t&&this._isAString(this._board[e][t-1])&&n++,!(o===r||n||!o&&this._usedWords.length)}},{key:"isUsedWord",value:function(t){return!!t&&(t=t.toLowerCase(),!this._usedWords||this._usedWords.find(function(e){return e===t}))}},{key:"addWordRandomly",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t)return!1;if(!this._usedWords.length){var i=Math.floor(.5*(this._boardSize-t.length)),r=Math.ceil(.5*this._boardSize);return this.addWord(i,r,t,!1),!0}for(var n=0;n<this._boardSize;n++)for(var o=0;o<this._boardSize;o++){var s=this._board[n][o];if(this._isAString(s))for(var a=0;a<t.length;a++){if(t[a]===s)for(var u=1;u>=0;u--){var h=!!u,l=h?o:o-a,c=h?n-a:n;if(this.addWord(l,c,t,h,e))return!0}}}return!1}},{key:"addWord",value:function(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return!i||i.length<3?(console.log("word length is less than 3 letters!"),!1):this.checkPossibleCells(t,e,n,i.length)?this.isUsedWord(i)?(console.log("word is already used"),!1):this._checkPossibleLetters(t,e,i,n)?([].concat(r(i)).forEach(function(i,r){var o=e+(n?r:0),s=t+(n?0:r);this._board[o][s]=i.toLowerCase();for(var a=0;a<2;a++){var u=s+(n?a?1:-1:0),h=o+(n?0:a?1:-1);if(!(u<0||u>=this._boardSize||h<0||h>=this._boardSize)){var l=this._board[h][u];n&&!this._isAVerticalBlocker(l)&&(this._board[h][u]+=1),n||this._isAHorizontalBlocker(l)||(this._board[h][u]+=2)}}},this),n?(e&&(this._board[e-1][t]=3),e+i.length<this._boardSize&&(this._board[e+i.length][t]=3)):(t&&(this._board[e][t-1]=3),t+i.length<this._boardSize&&(this._board[e][t+i.length]=3)),this._usedWords&&this._usedWords.length>1&&(this._points+=o),this._usedWords.push(i),!0):(console.log("possible letters check failed!"),!1):(console.log("possible cells check failed!"),!1)}},{key:"getHintFromWordsArray",value:function(t){if(!t||!t.length)return null;var e=null;this._usedWords.length||(e=t[0]);for(var i=0;i<t.length;i++)if(this._usedWords.indexOf(t[i])<0&&t.length>3){e=t[i];break}return e}},{key:"_isAString",value:function(t){return"string"==typeof t}},{key:"_isANumber",value:function(t){return!this._isAString(t)}},{key:"_isAVerticalBlocker",value:function(t){return this._isAString(t)||1===t||t>=3}},{key:"_isAHorizontalBlocker",value:function(t){return this._isAString(t)||2===t||t>=3}},{key:"_checkPossibleLetters",value:function(t,e,i){for(var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=0;o<i.length;o++){var s=n?t:t+o,a=n?e+o:e,u=this._board[a][s];if(this._isAString(u)&&u!==[].concat(r(i))[o])return!1}return!0}},{key:"_cleanBoard",value:function(){if(this._board=[],this._boardSize)for(var t=0;t<this._boardSize;t++){for(var e=[],i=0;i<this._boardSize;i++)e.push(0);this._board.push(e)}}},{key:"_findPossibleRegExp",value:function(t,e){for(var i=[],r=!1,n=0;n<2;n++){r=!!n;var o=this._generateRegExp(t,e,r);o&&i.indexOf(o)<0&&i.push(o)}return i}},{key:"_generateRegExp",value:function(t,e,i){var r=this,n="",o=Math.max(this._boardSize-(i?e:t),i?e:t),s=new Array(this._boardSize);s[i?e:t]=this._board[e][t];for(var a=!1,u=!1,h=0,l=function(t){var e=i&&r._isAVerticalBlocker(t),n=!i&&r._isAHorizontalBlocker(t);return e||n},c=1;c<=o;c++){var f=null,d=null,p=null;(i?e:t)-c>=0&&!a&&(p=this._board[i?e-c:e][i?t:t-c],f=i?e-c:t-c,d=i?e-c+1:t-c+1,l(p)?this._isAString(p)&&!h?(s[f]=p,h++):(a=!0,this._isAString(p)&&(s[d]=null)):s[f]="[a-z]"),(i?e:t)+c<this._boardSize&&!u&&(p=this._board[i?e+c:e][i?t:t+c],f=i?e+c:t+c,d=i?e+c-1:t+c-1,l(p)?this._isAString(p)&&!h?(s[f]=p,h++):(u=!0,this._isAString(p)&&(s[d]=null)):s[f]="[a-z]")}n+="^(";var _=0,v=0;return h=0,s.forEach(function(t,e){t&&"[a-z]"===t?_++:t&&(1===++h?n+="[a-z]{0,"+_+"}"+t.toLowerCase():2===h&&(n+="[a-z]{"+_+"}"+t.toLowerCase()),v+=_,_=0)},this),_&&(n+="[a-z]{0,"+_+"}"),n+=")$",(v+=_)||(n=null),n}}]),t}();e.default=s,t.exports=e.default}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Jkc2FpL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly93b3Jkc2FpL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dvcmRzYWkvLi9ub2RlX21vZHVsZXMvZGF3Zy1sb29rdXAvbGliL3B0cmllLmpzIiwid2VicGFjazovL3dvcmRzYWkvLi9ub2RlX21vZHVsZXMvZGF3Zy1sb29rdXAvbGliL2FscGhhY29kZS5qcyIsIndlYnBhY2s6Ly93b3Jkc2FpLy4vbm9kZV9tb2R1bGVzL2Rhd2ctbG9va3VwL2xpYi91dGlsLmpzIiwid2VicGFjazovL3dvcmRzYWkvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd29yZHNhaS8uL3NyYy9CRS5qcyIsIndlYnBhY2s6Ly93b3Jkc2FpLy4vbm9kZV9tb2R1bGVzL2Rhd2ctbG9va3VwL2xpYi9pbmRleC5qcyIsIndlYnBhY2s6Ly93b3Jkc2FpLy4vbm9kZV9tb2R1bGVzL2Rhd2ctbG9va3VwL2xpYi90cmllLmpzIiwid2VicGFjazovL3dvcmRzYWkvLi9ub2RlX21vZHVsZXMvZGF3Zy1sb29rdXAvbGliL2hpc3RvZ3JhbS5qcyIsIndlYnBhY2s6Ly93b3Jkc2FpLy4vbm9kZV9tb2R1bGVzL2Rhd2ctbG9va3VwL2xpYi9ub2RlLmpzIiwid2VicGFjazovL3dvcmRzYWkvLi9zcmMvRkUuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiYWxwaGFjb2RlXzEiLCJOT0RFX1NFUCIsIlNUUklOR19TRVAiLCJURVJNSU5BTF9QUkVGSVgiLCJNSU5fTEVUVEVSIiwiTUFYX0xFVFRFUiIsIk1BWF9XT1JEIiwiQXJyYXkiLCJqb2luIiwicmVOb2RlUGFydCIsIlJlZ0V4cCIsInJlU3ltYm9sIiwiUFRyaWUiLCJwYWNrZWQiLCJzeW1zIiwibm9kZXMiLCJzcGxpdCIsInN5bUNvdW50IiwiZXhlYyIsImZyb21BbHBoYUNvZGUiLCJFcnJvciIsInRvQWxwaGFDb2RlIiwic3BsaWNlIiwiaXNXb3JkIiwid29yZCIsIm1hdGNoIiwibWF0Y2hlcyIsImxlbmd0aCIsIndvcmRzIiwiY29tcGxldGlvbnMiLCJwcmVmaXgiLCJsaW1pdCIsImNvZGUiLCJjaGFyQ29kZUF0Iiwic2xpY2UiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJiZXlvbmQiLCJmcm9tIiwiZW51bWVyYXRlIiwiZm4iLCJjdHgiLCJ1bmRlZmluZWQiLCJhYm9ydCIsInB1c2giLCJwcmVmaXhlcyIsImlub2RlIiwiX3RoaXMiLCJub2RlIiwiZW1pdCIsInJlcGxhY2UiLCJ3Iiwic3RyIiwicmVmIiwiaW5vZGVGcm9tUmVmIiwiaW5vZGVGcm9tIiwiZG5vZGUiLCJCQVNFIiwicGxhY2VzIiwicmFuZ2UiLCJwb3ciLCJjbXBEZWZhdWx0IiwiYSIsImIiLCJkaXIiLCJyZXN1bHQiLCJzb3J0QnlWYWx1ZXMiLCJzb3J0IiwidW5pcXVlIiwiY21wIiwiX0JFIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9GRSIsIkJFIiwiZGVmYXVsdCIsIkZFIiwiX2Rhd2dMb29rdXAiLCJfY2xhc3NDYWxsQ2hlY2siLCJfbWFpbkRpY3Rpb25hcnkiLCJfZGljdGlvbmFyaWVzIiwia2V5cyIsIl9hIiwiaiIsInN0cmluZyIsImRpY3QiLCJUcmllIiwicGFjayIsIl9hZGREaWN0aW9uYXJ5IiwicmVnRXhwQXJyYXkiLCJkaWN0aW9uYXJ5TmFtZSIsImNvbnNvbGUiLCJsb2ciLCJmb3JFYWNoIiwiZWxlbWVudCIsIl9nZXRXb3Jkc0J5UmVnRXhwIiwiY29uY2F0IiwiZXhpc3RzIiwicG9pbnRzIiwiZmlyc3RMZXR0ZXJJRCIsIl9nZXRMZXR0ZXJJRCIsIl90b0NvbnN1bWFibGVBcnJheSIsIndvcmRzQXJyYXkiLCJfZ2V0V29yZHNBcnJheUJ5TGV0dGVySUQiLCJpbmRleE9mIiwicmVnRXhwIiwicmFuZG9tTGV0dGVySUQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhbHBoYWJldCIsInJlZ3VsYXJFeHByZXNzaW9uIiwibGV0dGVySUQiLCJjdXJyZW50TGV0dGVyIiwibmV4dExldHRlciIsImRpY3Rpb25hcnkiLCJsZXR0ZXIiLCJ0b0xvd2VyQ2FzZSIsInRyaWVfMSIsInB0cmllXzEiLCJwdHJpZSIsImhpc3RvZ3JhbV8xIiwidXRpbF8xIiwibm9kZV8xIiwiREVCVUciLCJOb2RlIiwibGFzdFdvcmQiLCJzdWZmaXhlcyIsImNOZXh0Iiwid29yZENvdW50IiwidkN1ciIsImluc2VydFdvcmRzIiwiaW5zZXJ0IiwiX2luc2VydCIsImNvbW1vblByZWZpeCIsImZyZWV6ZSIsInVuaXF1ZU5vZGUiLCJjb21iaW5lU3VmZml4Tm9kZSIsIm5leHQiLCJwcm9wIiwiaXNOb2RlIiwiY2hpbGQiLCJpc1Rlcm1pbmFsU3RyaW5nIiwic2V0Q2hpbGQiLCJhZGRUZXJtaW5hbCIsImRlbGV0ZUNoaWxkIiwib3B0aW1pemUiLCJwcmVwREZTIiwiY291bnREZWdyZWUiLCJjb2xsYXBzZUNoYWlucyIsIl9jIiwic2lnIiwiaXNUZXJtaW5hbCIsInByb3BzIiwic2lnU3RyaW5nIiwic2hhcmVkIiwidmlzaXRlZCIsIl92IiwiX2QiLCJfZyIsImlzRnJhZ21lbnQiLCJvdGhlciIsIm5vZGVDb3VudCIsInBvcyIsIm5vZGVMaW5lIiwibGluZSIsInNlcCIsIl9uIiwiaGlzdEFicyIsIkhpc3RvZ3JhbSIsImhpc3RSZWwiLCJudW1iZXJOb2RlcyIsInVuc2hpZnQiLCJhbmFseXplUmVmcyIsImFkZCIsInRvcE5vZGVzIiwiaGlnaGVzdCIsInNhdmluZ3MiLCJiZXN0IiwiY291bnQiLCJkZWZTaXplIiwic3ltIiwiY291bnRPZiIsInN5bWJvbENvdW50Iiwibm9kZUxpbmVzIiwicGFyc2VJbnQiLCJ3MSIsIncyIiwibWF4bGVuIiwibWluIiwibWVzc2FnZSIsImFyZ3MiLCJfaSIsImFyZ3VtZW50cyIsImFwcGx5IiwiY291bnRzIiwiaW5pdCIsInRvU3RyaW5nIiwidG9wIiwiX3AiLCJub2Rlc09ubHkiLCJXYWxrZXIiLCJkZnMiLCJvcmRlciIsImlzU2luZ2xldG9uIiwidmlzaXRNYXAiLCJNYXAiLCJyZXNldCIsInZpc2l0Iiwic2V0IiwiaGFuZGxlciIsIl9kZnMiLCJwYXJlbnQiLCJwcm9wUGFyZW50IiwicHJvcHNfMSIsImVuZEJvYXJkIiwiX2JvYXJkU2l6ZSIsIl91c2VkV29yZHMiLCJfYm9hcmQiLCJfcG9pbnRzIiwiYm9hcmRTaXplIiwiX2NsZWFuQm9hcmQiLCJhcnJheSIsImNlaWwiLCJ5IiwieCIsIl9pc0FTdHJpbmciLCJfZmluZFBvc3NpYmxlUmVnRXhwIiwic3RhcnRYIiwic3RhcnRZIiwidmVydGljYWwiLCJhbW91bnQiLCJibG9ja2Vyc0NvdW50ZXIiLCJsZXR0ZXJzQ291bnRlciIsImNoZWNrWCIsImNoZWNrWSIsImZpbmQiLCJhZGRXb3JkIiwiaW5kZXgiLCJzZWFyY2hYIiwic2VhcmNoWSIsImNoZWNrUG9zc2libGVDZWxscyIsImlzVXNlZFdvcmQiLCJfY2hlY2tQb3NzaWJsZUxldHRlcnMiLCJlbGVtZW50WSIsImVsZW1lbnRYIiwidGFyZ2V0WCIsInRhcmdldFkiLCJ0YXJnZXRFbGVtZW50IiwiX2lzQVZlcnRpY2FsQmxvY2tlciIsIl9pc0FIb3Jpem9udGFsQmxvY2tlciIsIl9hcnJheSIsIl9nZW5lcmF0ZVJlZ0V4cCIsImlEaWZmIiwibWF4Iiwid29yZEFycmF5IiwiaXNUb3BCbG9ja2VkIiwiaXNCb3R0b21CbG9ja2VkIiwiY2hlY2tJZkJsb2NrZXIiLCJpc1ZlcnRpY2FsQmxvY2tlciIsImlzSG9yaXpvbnRhbEJsb2NrZXIiLCJwcmV2TGV0dGVySUQiLCJhbnlDb3VudGVyIiwidG90YWxGcmVlQ291bnRlciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsSUFDQSxtQkFBQUcsZUFBQUMsSUFDQUQsT0FBQSxhQUFBSCxHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLFFBQUFELElBRUFELEVBQUEsUUFBQUMsSUFSQSxDQVNDLG9CQUFBSyxVQUFBQyxLQUFBLFdBQ0QsbUJDVEEsSUFBQUMsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUixRQUdBLElBQUFDLEVBQUFLLEVBQUFFLEdBQUEsQ0FDQUMsRUFBQUQsRUFDQUUsR0FBQSxFQUNBVixRQUFBLElBVUEsT0FOQVcsRUFBQUgsR0FBQUksS0FBQVgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQU8sR0FHQU4sRUFBQVMsR0FBQSxFQUdBVCxFQUFBRCxRQTBEQSxPQXJEQU8sRUFBQU0sRUFBQUYsRUFHQUosRUFBQU8sRUFBQVIsRUFHQUMsRUFBQVEsRUFBQSxTQUFBZixFQUFBZ0IsRUFBQUMsR0FDQVYsRUFBQVcsRUFBQWxCLEVBQUFnQixJQUNBRyxPQUFBQyxlQUFBcEIsRUFBQWdCLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNWLEVBQUFnQixFQUFBLFNBQUF2QixHQUNBLG9CQUFBd0IsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQXBCLEVBQUF3QixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBcEIsRUFBQSxjQUFpRDBCLE9BQUEsS0FRakRuQixFQUFBb0IsRUFBQSxT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QUFRdUIsZUFFL0VrSixHQUFvQkQsRUFDcEJBLEVBQWEsSUFFZHpTLE1BR0N5UyxJQUFZN0osR0FBVSxXQUFhNkosRUFBYSxLQUVwRDdKLEdBQVUsTUFIVjhKLEdBQW9CRCxLQUtHN0osRUFBUyxNQUV6QkEiLCJmaWxlIjoid29yZHNhaS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIndvcmRzYWlcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wid29yZHNhaVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJ3b3Jkc2FpXCJdID0gZmFjdG9yeSgpO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbnZhciBhbHBoYWNvZGVfMSA9IHJlcXVpcmUoXCIuL2FscGhhY29kZVwiKTtcbmV4cG9ydHMuTk9ERV9TRVAgPSAnOyc7XG5leHBvcnRzLlNUUklOR19TRVAgPSAnLCc7XG5leHBvcnRzLlRFUk1JTkFMX1BSRUZJWCA9ICchJztcbmV4cG9ydHMuTUlOX0xFVFRFUiA9ICdhJztcbmV4cG9ydHMuTUFYX0xFVFRFUiA9ICd6JztcbmV4cG9ydHMuTUFYX1dPUkQgPSBuZXcgQXJyYXkoMTApLmpvaW4oZXhwb3J0cy5NQVhfTEVUVEVSKTtcbnZhciByZU5vZGVQYXJ0ID0gbmV3IFJlZ0V4cCgnKFsnICsgZXhwb3J0cy5NSU5fTEVUVEVSICsgJy0nICsgZXhwb3J0cy5NQVhfTEVUVEVSICtcbiAgICAnXSspKCcgKyBleHBvcnRzLlNUUklOR19TRVAgKyAnfFswLTlBLVpdK3wkKScsICdnJyk7XG52YXIgcmVTeW1ib2wgPSBuZXcgUmVnRXhwKFwiKFswLTlBLVpdKyk6KFswLTlBLVpdKylcIik7XG4vKlxuICogUGFja2VkIFRyaWUgc3RydWN0dXJlLlxuICpcbiAqIFRoaXMgY2xhc3MgY2FuIHJlYWQgaW4gYSBwYWNrZWQgVHJpZSAoYWN0dWFsbHkgREFXRykgaW4gdGhlIGZvcm1cbiAqIG9mIGEgc3RyaW5nIGVuY29kaW5nIG9mIGEgc2V0IG9mIG5vZGVzLiAgSXQgd2lsbCB0aGVuIHNwaWx0IGl0XG4gKiBpbnRvIGFuIGFycmF5IG9mIHN0cmluZ3MsIGFuZCB1c2UgdGhlIHJlc3VsdGluZyBhcnJheSB0b1xuICogcmVzb2x2ZSBkaWN0aW9uYXJ5IG1lbWJlcnNoaXAuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogICAvLyBVbnBhY2sgYSBwYWNrZWQgZGljdGlvbmFyeSBzdHJpbmcgZm9yIHVzZS5cbiAqICAgdmFyIHB0cmllID0gbmV3IFBUcmllKHBhY2tlZFN0cmluZyk7XG4gKlxuICogICAvLyBUZXN0IGEgd29yZCBmb3IgbWVtYmVyc2hpcCBpbiB0aGUgZGljdGlvbmFyeS5cbiAqICAgaWYgKHB0cmllLmlzV29yZChteVdvcmQpKSB7XG4gKiAgICAgLi4uXG4gKiAgIH1cbiAqXG4gKiAgIC8vIEZvciBjb21tYW5kIGNvbXBsZXRpb24gLSBmaW5kIGZpcnN0IDIwIHdvcmRzIHRoYXQgYmVnaW4gd2l0aCBhIHByZWZpeC5cbiAqICAgdmFyIHdvcmRzID0gcHRyaWUuY29tcGxldGlvbnMocHJlZml4LCAyMCk7XG4gKi9cbnZhciBQVHJpZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUFRyaWUocGFja2VkKSB7XG4gICAgICAgIHRoaXMuc3ltcyA9IFtdO1xuICAgICAgICB0aGlzLm5vZGVzID0gcGFja2VkLnNwbGl0KGV4cG9ydHMuTk9ERV9TRVApO1xuICAgICAgICB0aGlzLnN5bXMgPSBbXTtcbiAgICAgICAgdGhpcy5zeW1Db3VudCA9IDA7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICB2YXIgbSA9IHJlU3ltYm9sLmV4ZWModGhpcy5ub2Rlc1t0aGlzLnN5bUNvdW50XSk7XG4gICAgICAgICAgICBpZiAoIW0pIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhbHBoYWNvZGVfMS5mcm9tQWxwaGFDb2RlKG1bMV0pICE9PSB0aGlzLnN5bUNvdW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBTeW1ib2wgbmFtZSAtIGZvdW5kIFwiICsgbVsxXSArXG4gICAgICAgICAgICAgICAgICAgIFwiIHdoZW4gZXhwZWN0aW5nIFwiICsgYWxwaGFjb2RlXzEudG9BbHBoYUNvZGUodGhpcy5zeW1Db3VudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zeW1zW3RoaXMuc3ltQ291bnRdID0gYWxwaGFjb2RlXzEuZnJvbUFscGhhQ29kZShtWzJdKTtcbiAgICAgICAgICAgIHRoaXMuc3ltQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5vZGVzLnNwbGljZSgwLCB0aGlzLnN5bUNvdW50KTtcbiAgICB9XG4gICAgLy8gSXMgd29yZCBpbiB0aGUgZGljdGlvbmFyeSAoZXhhY3QgbWF0Y2gpLlxuICAgIFBUcmllLnByb3RvdHlwZS5pc1dvcmQgPSBmdW5jdGlvbiAod29yZCkge1xuICAgICAgICBpZiAod29yZCA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaCh3b3JkKSA9PT0gd29yZDtcbiAgICB9O1xuICAgIC8vIFJldHVybnMgdGhlIGxvbmdlc3QgbWF0Y2ggdGhhdCBpcyBwcmVmaXggb2Ygd29yZC5cbiAgICBQVHJpZS5wcm90b3R5cGUubWF0Y2ggPSBmdW5jdGlvbiAod29yZCkge1xuICAgICAgICB2YXIgbWF0Y2hlcyA9IHRoaXMubWF0Y2hlcyh3b3JkKTtcbiAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGggLSAxXTtcbiAgICB9O1xuICAgIC8vIFJldHVybiBhbGwgZW50cmllcyB0aGF0IG1hdGNoIGEgcHJlZml4IG9mIHdvcmQgKGluIG9yZGVyIG9mIGluY3JlYXNpbmdcbiAgICAvLyBsZW5ndGguXG4gICAgUFRyaWUucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAod29yZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53b3Jkcyh3b3JkLCB3b3JkICsgZXhwb3J0cy5NSU5fTEVUVEVSKTtcbiAgICB9O1xuICAgIC8vIFJldHVybiBhbGwgZW50cmllcyB0aGF0IGJlZ2luIHdpdGggYSBwcmVmaXguXG4gICAgUFRyaWUucHJvdG90eXBlLmNvbXBsZXRpb25zID0gZnVuY3Rpb24gKHByZWZpeCwgbGltaXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud29yZHMocHJlZml4LCBiZXlvbmQocHJlZml4KSwgbGltaXQpO1xuICAgIH07XG4gICAgUFRyaWUucHJvdG90eXBlLndvcmRzID0gZnVuY3Rpb24gKGZyb20sIGJleW9uZCwgbGltaXQpIHtcbiAgICAgICAgdmFyIHdvcmRzID0gW107XG4gICAgICAgIGZ1bmN0aW9uIGNhdGNoV29yZHMod29yZCwgY3R4KSB7XG4gICAgICAgICAgICBpZiAobGltaXQgIT09IHVuZGVmaW5lZCAmJiB3b3Jkcy5sZW5ndGggPj0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICBjdHguYWJvcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdvcmRzLnB1c2god29yZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbnVtZXJhdGUoMCwgJycsIHsgZnJvbTogZnJvbSxcbiAgICAgICAgICAgIGJleW9uZDogYmV5b25kLFxuICAgICAgICAgICAgZm46IGNhdGNoV29yZHMsXG4gICAgICAgICAgICBwcmVmaXhlczogKGZyb20gKyBleHBvcnRzLk1JTl9MRVRURVIpID09PSBiZXlvbmRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB3b3JkcztcbiAgICB9O1xuICAgIFBUcmllLnByb3RvdHlwZS5lbnVtZXJhdGUgPSBmdW5jdGlvbiAoaW5vZGUsIHByZWZpeCwgY3R4KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5ub2Rlc1tpbm9kZV07XG4gICAgICAgIHZhciBjb250ID0gdHJ1ZTtcbiAgICAgICAgZnVuY3Rpb24gZW1pdCh3b3JkKSB7XG4gICAgICAgICAgICBpZiAoY3R4LnByZWZpeGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHdvcmQgPT09IGN0eC5mcm9tLnNsaWNlKDAsIHdvcmQubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHguZm4od29yZCwgY3R4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN0eC5mcm9tIDw9IHdvcmQgJiYgd29yZCA8IGN0eC5iZXlvbmQpIHtcbiAgICAgICAgICAgICAgICBjdHguZm4od29yZCwgY3R4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZVswXSA9PT0gZXhwb3J0cy5URVJNSU5BTF9QUkVGSVgpIHtcbiAgICAgICAgICAgIGVtaXQocHJlZml4KTtcbiAgICAgICAgICAgIGlmIChjdHguYWJvcnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlID0gbm9kZS5zbGljZSgxKTtcbiAgICAgICAgfVxuICAgICAgICBub2RlLnJlcGxhY2UocmVOb2RlUGFydCwgZnVuY3Rpb24gKHcsIHN0ciwgcmVmKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBwcmVmaXggKyBzdHI7XG4gICAgICAgICAgICAvLyBEb25lIG9yIG5vIHBvc3NpYmxlIGZ1dHVyZSBtYXRjaCBmcm9tIHN0clxuICAgICAgICAgICAgaWYgKGN0eC5hYm9ydCB8fFxuICAgICAgICAgICAgICAgIG1hdGNoID49IGN0eC5iZXlvbmQgfHxcbiAgICAgICAgICAgICAgICBtYXRjaCA8IGN0eC5mcm9tLnNsaWNlKDAsIG1hdGNoLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaXNUZXJtaW5hbCA9IHJlZiA9PT0gZXhwb3J0cy5TVFJJTkdfU0VQIHx8IHJlZiA9PT0gJyc7XG4gICAgICAgICAgICBpZiAoaXNUZXJtaW5hbCkge1xuICAgICAgICAgICAgICAgIGVtaXQobWF0Y2gpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLmVudW1lcmF0ZShfdGhpcy5pbm9kZUZyb21SZWYocmVmLCBpbm9kZSksIG1hdGNoLCBjdHgpO1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8vIFJlZmVyZW5jZXMgYXJlIGVpdGhlciBhYnNvbHV0ZSAoc3ltYm9sKSBvciByZWxhdGl2ZSAoMSBiYXNlZCkuXG4gICAgUFRyaWUucHJvdG90eXBlLmlub2RlRnJvbVJlZiA9IGZ1bmN0aW9uIChyZWYsIGlub2RlRnJvbSkge1xuICAgICAgICB2YXIgZG5vZGUgPSBhbHBoYWNvZGVfMS5mcm9tQWxwaGFDb2RlKHJlZik7XG4gICAgICAgIGlmIChkbm9kZSA8IHRoaXMuc3ltQ291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN5bXNbZG5vZGVdO1xuICAgICAgICB9XG4gICAgICAgIGRub2RlIC09IHRoaXMuc3ltQ291bnQ7XG4gICAgICAgIHJldHVybiBpbm9kZUZyb20gKyBkbm9kZSArIDE7XG4gICAgfTtcbiAgICByZXR1cm4gUFRyaWU7XG59KCkpO1xuZXhwb3J0cy5QVHJpZSA9IFBUcmllO1xuLy8gUmV0dXJuIGEgc3RyaW5nIHRoYXQgaXMgdGhlIHNtYWxsZXN0IHN0cmluZyBncmVhdGVyIHRoYW5cbi8vIGFueSBzdHJpbmcgd2hpY2ggaXMgcHJlZml4ZWQgd2l0aCBzLlxuZnVuY3Rpb24gYmV5b25kKHMpIHtcbiAgICBpZiAocy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuTUFYX1dPUkQ7XG4gICAgfVxuICAgIHZhciBjb2RlID0gcy5jaGFyQ29kZUF0KHMubGVuZ3RoIC0gMSk7XG4gICAgcmV0dXJuIHMuc2xpY2UoMCwgLTEpICsgU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlICsgMSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wdHJpZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLkJBU0UgPSAzNjtcbi8vIFBsYWNlaG9sZGVyXG52YXIgUFRyaWUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBUcmllKCkge1xuICAgIH1cbiAgICByZXR1cm4gUFRyaWU7XG59KCkpO1xuZXhwb3J0cy5QVHJpZSA9IFBUcmllO1xuLy8gMCwgMSwgMiwgLi4uLCBBLCBCLCBDLCAuLi4sIDAwLCAwMSwgLi4uIEFBLCBBQiwgQUMsIC4uLiwgQUFBLCBBQUIsIC4uLlxuZnVuY3Rpb24gdG9BbHBoYUNvZGUobikge1xuICAgIHZhciBzID0gJyc7XG4gICAgdmFyIHBsYWNlcyA9IDE7XG4gICAgZm9yICh2YXIgcmFuZ2UgPSBleHBvcnRzLkJBU0U7IG4gPj0gcmFuZ2U7IG4gLT0gcmFuZ2UsIHBsYWNlcysrLCByYW5nZSAqPSBleHBvcnRzLkJBU0UpIHsgfVxuICAgIHdoaWxlIChwbGFjZXMtLSkge1xuICAgICAgICB2YXIgZCA9IG4gJSBleHBvcnRzLkJBU0U7XG4gICAgICAgIHMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChkIDwgMTAgPyA0OCA6IDU1KSArIGQpICsgcztcbiAgICAgICAgbiA9IChuIC0gZCkgLyBleHBvcnRzLkJBU0U7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuZXhwb3J0cy50b0FscGhhQ29kZSA9IHRvQWxwaGFDb2RlO1xuZnVuY3Rpb24gZnJvbUFscGhhQ29kZShzKSB7XG4gICAgdmFyIG4gPSAwO1xuICAgIGZvciAodmFyIHBsYWNlcyA9IDEsIHJhbmdlID0gZXhwb3J0cy5CQVNFOyBwbGFjZXMgPCBzLmxlbmd0aDsgbiArPSByYW5nZSwgcGxhY2VzKyssIHJhbmdlICo9IGV4cG9ydHMuQkFTRSkgeyB9XG4gICAgZm9yICh2YXIgaSA9IHMubGVuZ3RoIC0gMSwgcG93ID0gMTsgaSA+PSAwOyBpLS0sIHBvdyAqPSBleHBvcnRzLkJBU0UpIHtcbiAgICAgICAgdmFyIGQgPSBzLmNoYXJDb2RlQXQoaSkgLSA0ODtcbiAgICAgICAgaWYgKGQgPiAxMCkge1xuICAgICAgICAgICAgZCAtPSA3O1xuICAgICAgICB9XG4gICAgICAgIG4gKz0gZCAqIHBvdztcbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5leHBvcnRzLmZyb21BbHBoYUNvZGUgPSBmcm9tQWxwaGFDb2RlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWxwaGFjb2RlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmZ1bmN0aW9uIHNvcnRCeVZhbHVlcyhvLCBkaXIpIHtcbiAgICBpZiAoZGlyID09PSB2b2lkIDApIHsgZGlyID0gJ2FzYyc7IH1cbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG8pIHtcbiAgICAgICAgcmVzdWx0LnB1c2goW2tleSwgb1trZXldXSk7XG4gICAgfVxuICAgIHJlc3VsdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBjbXBEZWZhdWx0KGFbMV0sIGJbMV0sIGRpcik7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydHMuc29ydEJ5VmFsdWVzID0gc29ydEJ5VmFsdWVzO1xuZnVuY3Rpb24gY21wRGVmYXVsdChhLCBiLCBkaXIpIHtcbiAgICBpZiAoZGlyID09PSB2b2lkIDApIHsgZGlyID0gJ2FzYyc7IH1cbiAgICB2YXIgcmVzdWx0ID0gMDtcbiAgICBpZiAoYSA8IGIpIHtcbiAgICAgICAgcmVzdWx0ID0gLTE7XG4gICAgfVxuICAgIGVsc2UgaWYgKGEgPiBiKSB7XG4gICAgICAgIHJlc3VsdCA9IDE7XG4gICAgfVxuICAgIHJldHVybiBkaXIgPT09ICdhc2MnID8gcmVzdWx0IDogLXJlc3VsdDtcbn1cbi8vIFNvcnQgZWxlbWVudHMgYW5kIHJlbW92ZSBkdXBsaWNhdGVzIGZyb20gYXJyYXkgKG1vZGlmaWVkIGluIHBsYWNlKS5cbmZ1bmN0aW9uIHVuaXF1ZShhLCBjbXApIHtcbiAgICBpZiAoY21wID09PSB2b2lkIDApIHsgY21wID0gY21wRGVmYXVsdDsgfVxuICAgIGEuc29ydChjbXApO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoY21wKGFbaSAtIDFdLCBhW2ldKSA9PT0gMCkge1xuICAgICAgICAgICAgYS5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLnVuaXF1ZSA9IHVuaXF1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWwuanMubWFwIiwiaW1wb3J0IEJFIGZyb20gJy4vQkUnO1xuaW1wb3J0IEZFIGZyb20gJy4vRkUnO1xuZXhwb3J0IGRlZmF1bHQgeyBCRSwgRkV9O1xuIiwiaW1wb3J0IHtUcmllLCBQVHJpZX0gZnJvbSAnZGF3Zy1sb29rdXAnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQkUge1xuICAvKiogcmV0dXJucyAoJiBnZW5lcmF0ZXMpIGFscGhhYmV0IGFycmF5ICovXG4gIGdldCBhbHBoYWJldCgpIHtcbiAgICBpZiAoIXRoaXMuX2EpIHtcbiAgICAgIHRoaXMuX2EgPSBbXTtcbiAgICAgIGxldCBpID0gJ2EnLmNoYXJDb2RlQXQoMCksIGogPSAneicuY2hhckNvZGVBdCgwKTtcblxuICAgICAgZm9yICg7aSA8PSBqOysraSkgdGhpcy5fYS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaSkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9hO1xuICB9XG4gIGdldE1haW5EaWN0aW9uYXJ5KCkgeyByZXR1cm4gdGhpcy5fbWFpbkRpY3Rpb25hcnk7fTtcbiAgLyoqIHByb3ZpZGVzIGFkZGVkIHNlY29uZGFyeSBkaWN0aW9uYXJpZXMgbmFtZXMgKi9cbiAgZ2V0U2Vjb25kYXJ5RGljdGlvbmFyaWVzKCkgeyByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fZGljdGlvbmFyaWVzKTsgfVxuICAvKipcbiAgICogR2VuZXJhdGVzIGFuIGluc3RhbnNlIG9mIHRoZSBXb3JkcyBBSSBCRSBsaWJyYXJ5XG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fbWFpbkRpY3Rpb25hcnkgPSBudWxsO1xuICAgIHRoaXMuX2RpY3Rpb25hcmllcyA9IHt9O1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIG1haW4gZGljdGlvbmFyeSB0byB0aGUgbGlicmFyeS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyAtIGRpY3Rpb25hcnkgc3RyaW5nLlxuICAgKiAqL1xuICBsb2FkTWFpbkRpY3Rpb25hcnkoc3RyaW5nKSB7XG4gICAgbGV0IGRpY3QgPSBuZXcgVHJpZShzdHJpbmcpO1xuXG4gICAgdGhpcy5fbWFpbkRpY3Rpb25hcnkgPSBuZXcgUFRyaWUoZGljdC5wYWNrKCkpO1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIHNlY29uZGFyeSBkaWN0aW9uYXJ5IHRvIHRoZSBsaWJyYXJ5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIHVuaXF1ZSBuYW1lIGZvciB0aGUgZGljdGlvbmFyeS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyAtIGRpY3Rpb25hcnkgc3RyaW5nLlxuICAgKiAqL1xuICBsb2FkU2Vjb25kYXJ5RGljdGlvbmFyeShuYW1lLCBzdHJpbmcpIHtcbiAgICB0aGlzLl9hZGREaWN0aW9uYXJ5KG5hbWUsIHN0cmluZyk7XG4gIH1cbiAgLyoqXG4gICAqIHByb3ZpZGVzIHRoZSBiaWdnZXN0IHBvc3NpYmxlIGJ5IHJlZ3VsYXIgZXByZXNzaW9ucyB3b3JkLlxuICAgKiBAcGFyYW0ge2FycmF5fSByZWdFeHBBcnJheSAtIGluY29tZSBhcnJheSBvZiBwb3NzaWJsZSByZWd1bGFyIGV4cHJlc3Npb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkaWN0aW9uYXJ5TmFtZSAtIGRpY3Rpb25hcnkgbmFtZSB0byB1c2UgZm9yIHdvcmQgc2VhcmNoXG4gICAqIEByZXR1cm4ge2FycmF5fSAtIGFycmF5IG9mIHBvc3NpYmxlIHBvc3NpYmxlIHdvcmRzXG4gICAqL1xuICBnZXRIaW50KHJlZ0V4cEFycmF5LCBkaWN0aW9uYXJ5TmFtZSkge1xuICAgIGlmICghdGhpcy5fbWFpbkRpY3Rpb25hcnkgfHwgIU9iamVjdC5rZXlzKHRoaXMuX2RpY3Rpb25hcmllcykubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmxvZygnQkU6IHRoZXJlIGFyZSBzb21lIGRpY3Rpb25hcmllcyBhYnNlbnQgaW4gQkUnKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoIShkaWN0aW9uYXJ5TmFtZSBpbiB0aGlzLl9kaWN0aW9uYXJpZXMpKSB7XG4gICAgICBjb25zb2xlLmxvZygnQkU6IGRpY3Rpb25hcnkgbmFtZSBpcyBhYnNlbnQgaW4gc2Vjb25kYXJ5IGRpY3Rpb25hcmllcyBsaXN0LiBVc2VkIG1haW4gZGljdGlvbmFyeSBpbnN0ZWFkLicpO1xuICAgICAgZGljdGlvbmFyeU5hbWUgPSAnbWFpbic7XG4gICAgfVxuXG4gICAgbGV0IHdvcmRzID0gW107XG5cbiAgICByZWdFeHBBcnJheS5mb3JFYWNoKGVsZW1lbnQ9PntcbiAgICAgIGxldCB3ID0gdGhpcy5fZ2V0V29yZHNCeVJlZ0V4cChlbGVtZW50LCBkaWN0aW9uYXJ5TmFtZSk7XG5cbiAgICAgIGlmICh3Lmxlbmd0aCkgd29yZHMgPSB3b3Jkcy5jb25jYXQodyk7XG4gICAgfSwgdGhpcyk7XG5cbiAgICB3b3Jkcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAvLyBBU0MgIC0+IGEubGVuZ3RoIC0gYi5sZW5ndGhcbiAgICAgIC8vIERFU0MgLT4gYi5sZW5ndGggLSBhLmxlbmd0aFxuICAgICAgcmV0dXJuIGIubGVuZ3RoIC0gYS5sZW5ndGg7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gd29yZHM7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB3b3JkIGV4aXN0cyBhbmQgaWYgcG9pbnRzIGFkZGVkIGZvciB0aGlzIHdvcmRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHdvcmQgLSBpbmNvbWUgd29yZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGljdGlvbmFyeU5hbWUgLSBzZWNvbmRhcnUgZGljdGlvbmFyeSBuYW1lIHRvIGNoZWNrIHBvaW50c1xuICAgKiBAcmV0dXJucyB7b2JqZWN0fSA6IHsgZXhpc3RzOiBpZiB3b3JkIGV4aXN0cywgcG9pbnRzOiBob3cgbXVjaCBwb2ludHMgZm9yIGEgd29yZH1cbiAgICovXG4gIGdldFdvcmRTdGF0cyh3b3JkLCBkaWN0aW9uYXJ5TmFtZSkge1xuICAgIGxldCBleGlzdHMgPSBmYWxzZTtcbiAgICBsZXQgcG9pbnRzID0gMDtcblxuICAgIGxldCBmaXJzdExldHRlcklEID0gdGhpcy5fZ2V0TGV0dGVySUQoWy4uLndvcmRdWzBdKTtcblxuICAgIGxldCB3b3Jkc0FycmF5ID0gdGhpcy5fZ2V0V29yZHNBcnJheUJ5TGV0dGVySUQoZmlyc3RMZXR0ZXJJRCk7XG5cbiAgICBpZiAod29yZHNBcnJheS5pbmRleE9mKHdvcmQpID49IDApIGV4aXN0cyA9IHRydWU7XG5cbiAgICBpZiAoZGljdGlvbmFyeU5hbWUpIHtcbiAgICAgIHdvcmRzQXJyYXkgPSB0aGlzLl9nZXRXb3Jkc0FycmF5QnlMZXR0ZXJJRChmaXJzdExldHRlcklELCBkaWN0aW9uYXJ5TmFtZSk7XG4gICAgICBpZiAod29yZHNBcnJheS5pbmRleE9mKHdvcmQpID49IDApIHBvaW50cyA9IHdvcmQubGVuZ3RoO1xuICAgIH1cblxuICAgIHJldHVybiB7ZXhpc3RzOiBleGlzdHMsIHBvaW50czogcG9pbnRzfTtcblxuICB9XG4gIC8qKlxuICAgKiBQcml2YXRlIG1ldGhvZHNcbiAgICovXG4gIC8qKlxuICAgKiBhZGQgZGljdGlvbmFyeVxuICAgKiBPbmNlIGRpY2l0aW9uYXJ5IGlzIHByZWxvYWRlZCBsaWJyYXJ5IHdvbid0IGxvYWQgZGljdGlvbmFyeSBhZ2FpbiBidXQgdXNlIGV4aXN0aW5nIG9uZSBieSBuYW1lLlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSB1bmlxdWUgbmFtZSBmb3IgdGhlIGRpY3Rpb25hcnkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgLSBkaWN0aW9uYXJ5IHN0cmluZy5cbiAgICogKi9cbiAgX2FkZERpY3Rpb25hcnkobmFtZSwgc3RyaW5nKSB7XG4gICAgaWYgKG5hbWUgaW4gdGhpcy5fZGljdGlvbmFyaWVzKSByZXR1cm47XG4gICAgbGV0IGRpY3QgPSBuZXcgVHJpZShzdHJpbmcpO1xuXG4gICAgdGhpcy5fZGljdGlvbmFyaWVzW25hbWVdID0gbmV3IFBUcmllKGRpY3QucGFjaygpKTtcbiAgfVxuICAvKipcbiAgICogUHJvdmlkZXMgcG9zc2libGUgd29yZHMgaW4gc3BlY2lmaWMgZGljdGlvbmFyeSBieSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ0V4cCAtIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYWtlIHNlYXJjaCB3aXRoXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkaWN0aW9uYXJ5TmFtZSAtIG5hbWUgb2YgdGhlIGRpY3Rpb25hcnkgdG8gYmUgdXNlZCBmb3IgYSBzZWFyY2hcbiAgICogQHJldHVybiB7YXJyYXl9IC0gc2VhcmNoIHJlc3VsdCB3b3JkcyBhcnJheVxuICAgKi9cbiAgX2dldFdvcmRzQnlSZWdFeHAocmVnRXhwLCBkaWN0aW9uYXJ5TmFtZSkge1xuICAgIGxldCB3b3JkcyA9IFtdO1xuICAgIGxldCBzdGFydExldHRlcklEID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHRoaXMuYWxwaGFiZXQubGVuZ3RoIC0gMikpO1xuICAgIGxldCByYW5kb21MZXR0ZXJJRCA9IHN0YXJ0TGV0dGVySUQ7XG4gICAgbGV0IHJlZ3VsYXJFeHByZXNzaW9uID0gbmV3IFJlZ0V4cChyZWdFeHApO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFscGhhYmV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgcmFuZG9tV29yZHMgPSB0aGlzLl9nZXRXb3Jkc0FycmF5QnlMZXR0ZXJJRChyYW5kb21MZXR0ZXJJRCwgZGljdGlvbmFyeU5hbWUpO1xuXG4gICAgICByYW5kb21Xb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGlmIChlbGVtZW50Lm1hdGNoKHJlZ3VsYXJFeHByZXNzaW9uKSkgd29yZHMucHVzaChlbGVtZW50KTtcbiAgICAgIH0sIHRoaXMpO1xuXG4gICAgICByYW5kb21MZXR0ZXJJRCA9IChyYW5kb21MZXR0ZXJJRCArIGkpIDwgKHRoaXMuYWxwaGFiZXQubGVuZ3RoIC0gMSkgPyByYW5kb21MZXR0ZXJJRCArIGkgOiAwO1xuICAgIH1cbiAgICByZXR1cm4gd29yZHM7XG4gIH1cbiAgLyoqXG4gICAqIHByb3ZpZGVzIHdvcmRzIGFycmF5IGJhc2VkIG9uIGxldHRlciBpZCBhbmQgZGljdGlvbmFyeSB0eXBlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsZXR0ZXJJRCAtIExldHRlciBJRCBpbiB0aGUgYWxwaGFiZXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRpY3Rpb25hcnlOYW1lIC0gZGljdGlvbmFyeSBuYW1lXG4gICAqL1xuICBfZ2V0V29yZHNBcnJheUJ5TGV0dGVySUQobGV0dGVySUQsIGRpY3Rpb25hcnlOYW1lKSB7XG4gICAgbGV0IGN1cnJlbnRMZXR0ZXIgPSB0aGlzLmFscGhhYmV0W2xldHRlcklEXTtcbiAgICBsZXQgbmV4dExldHRlciA9IHRoaXMuYWxwaGFiZXRbbGV0dGVySUQgPCB0aGlzLmFscGhhYmV0Lmxlbmd0aCAtIDEgPyBsZXR0ZXJJRCArIDEgOiAwXTtcbiAgICBsZXQgd29yZHMgPSBbXTtcblxuICAgIGxldCBkaWN0aW9uYXJ5ID0gdGhpcy5fbWFpbkRpY3Rpb25hcnk7XG5cbiAgICBpZiAoZGljdGlvbmFyeU5hbWUgaW4gdGhpcy5fZGljdGlvbmFyaWVzKSBkaWN0aW9uYXJ5ID0gdGhpcy5fZGljdGlvbmFyaWVzW2RpY3Rpb25hcnlOYW1lXTtcblxuICAgIHdvcmRzID0gZGljdGlvbmFyeS53b3JkcyhjdXJyZW50TGV0dGVyLCBuZXh0TGV0dGVyKTtcblxuICAgIGRpY3Rpb25hcnkgPSBudWxsO1xuXG4gICAgcmV0dXJuIHdvcmRzO1xuICB9XG4gIC8qKlxuICAgKiBwcm92aWRlcyBsZXR0ZXIgaWQgaW4gdGhlIGFscGhhYmV0XG4gICAqIEBwYXJhbSB7Y2hhcn0gbGV0dGVyIC0gTGV0dGVyLlxuICAgKiAqL1xuICBfZ2V0TGV0dGVySUQobGV0dGVyKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFscGhhYmV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5hbHBoYWJldFtpXS50b0xvd2VyQ2FzZSgpID09PSBsZXR0ZXIudG9Mb3dlckNhc2UoKSkgcmV0dXJuIGk7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgdHJpZV8xID0gcmVxdWlyZShcIi4vdHJpZVwiKTtcbmV4cG9ydHMuVHJpZSA9IHRyaWVfMS5UcmllO1xudmFyIHB0cmllXzEgPSByZXF1aXJlKFwiLi9wdHJpZVwiKTtcbmV4cG9ydHMuUFRyaWUgPSBwdHJpZV8xLlBUcmllO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuLypcbiAgQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIGEgVHJpZSBzZWFyY2ggZGF0YXN0cnVjdHVyZS5cblxuICBVc2FnZTpcblxuICB0cmllID0gbmV3IFRyaWUoZGljdGlvbmFyeS1zdHJpbmcpO1xuICBib29sID0gdHJpZS5pc1dvcmQod29yZCk7XG5cbiAgVG8gdXNlIGEgcGFja2VkIChjb21wcmVzc2VkKSB2ZXJzaW9uIG9mIHRoZSB0cmllIHN0b3JlZCBhcyBhIHN0cmluZzpcblxuICBjb21wcmVzc2VkID0gdHJpZS5wYWNrKCk7XG4gIHB0cmllID0gbmV3IFBhY2tlZFRyaWUoY29tcHJlc3NlZCk7XG4gIGJvb2wgPSBwdHJpZS5pc1dvcmQod29yZClcblxuKi9cbnZhciBwdHJpZSA9IHJlcXVpcmUoXCIuL3B0cmllXCIpO1xudmFyIGFscGhhY29kZV8xID0gcmVxdWlyZShcIi4vYWxwaGFjb2RlXCIpO1xudmFyIGhpc3RvZ3JhbV8xID0gcmVxdWlyZShcIi4vaGlzdG9ncmFtXCIpO1xudmFyIHV0aWxfMSA9IHJlcXVpcmUoXCIuL3V0aWxcIik7XG52YXIgbm9kZV8xID0gcmVxdWlyZShcIi4vbm9kZVwiKTtcbnZhciBERUJVRyA9IGZhbHNlO1xuLy8gQ3JlYXRlIGEgVHJpZSBkYXRhIHN0cnVjdHVyZSBmb3Igc2VhcmNoaW5nIGZvciBtZW1iZXJzaGlwIG9mIHN0cmluZ3Ncbi8vIGluIGEgZGljdGlvbmFyeSBpbiBhIHZlcnkgc3BhY2UgZWZmaWNpZW50IHdheS5cbnZhciBUcmllID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUcmllKHdvcmRzKSB7XG4gICAgICAgIHRoaXMucm9vdCA9IG5ldyBub2RlXzEuTm9kZSgpO1xuICAgICAgICB0aGlzLmxhc3RXb3JkID0gJyc7XG4gICAgICAgIHRoaXMuc3VmZml4ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5jTmV4dCA9IDE7XG4gICAgICAgIHRoaXMud29yZENvdW50ID0gMDtcbiAgICAgICAgdGhpcy52Q3VyID0gMDtcbiAgICAgICAgdGhpcy5pbnNlcnRXb3Jkcyh3b3Jkcyk7XG4gICAgfVxuICAgIC8vIEluc2VydCB3b3JkcyBmcm9tIG9uZSBiaWcgc3RyaW5nLCBvciBmcm9tIGFuIGFycmF5LlxuICAgIFRyaWUucHJvdG90eXBlLmluc2VydFdvcmRzID0gZnVuY3Rpb24gKHdvcmRzKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpZiAod29yZHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygd29yZHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB3b3JkcyA9IHdvcmRzLnNwbGl0KC9bXmEtekEtWl0rLyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB3b3Jkc1tpXSA9IHdvcmRzW2ldLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdXRpbF8xLnVuaXF1ZSh3b3Jkcyk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5pbnNlcnQod29yZHNbaV0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUcmllLnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbiAod29yZCkge1xuICAgICAgICB0aGlzLl9pbnNlcnQod29yZCwgdGhpcy5yb290KTtcbiAgICAgICAgdmFyIGxhc3RXb3JkID0gdGhpcy5sYXN0V29yZDtcbiAgICAgICAgdGhpcy5sYXN0V29yZCA9IHdvcmQ7XG4gICAgICAgIHZhciBwcmVmaXggPSBjb21tb25QcmVmaXgod29yZCwgbGFzdFdvcmQpO1xuICAgICAgICBpZiAocHJlZml4ID09PSBsYXN0V29yZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmcmVlemUgPSB0aGlzLnVuaXF1ZU5vZGUobGFzdFdvcmQsIHdvcmQsIHRoaXMucm9vdCk7XG4gICAgICAgIGlmIChmcmVlemUpIHtcbiAgICAgICAgICAgIHRoaXMuY29tYmluZVN1ZmZpeE5vZGUoZnJlZXplKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVHJpZS5wcm90b3R5cGUuX2luc2VydCA9IGZ1bmN0aW9uICh3b3JkLCBub2RlKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIgcHJlZml4O1xuICAgICAgICB2YXIgbmV4dDtcbiAgICAgICAgdmFyIHByb3A7XG4gICAgICAgIC8vIER1cGxpY2F0ZSB3b3JkIGVudHJ5IC0gaWdub3JlXG4gICAgICAgIGlmICh3b3JkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvIGFueSBleGlzdGluZyBwcm9wcyBzaGFyZSBhIGNvbW1vbiBwcmVmaXg/XG4gICAgICAgIGZvciAocHJvcCBpbiBub2RlKSB7XG4gICAgICAgICAgICBpZiAoIW5vZGUuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZWZpeCA9IGNvbW1vblByZWZpeCh3b3JkLCBwcm9wKTtcbiAgICAgICAgICAgIGlmIChwcmVmaXgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQcm9wIGlzIGEgcHJvcGVyIHByZWZpeCAtIHJlY3Vyc2UgdG8gY2hpbGQgbm9kZVxuICAgICAgICAgICAgaWYgKHByb3AgPT09IHByZWZpeCAmJiBub2RlXzEuTm9kZS5pc05vZGUobm9kZS5jaGlsZChwcm9wKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnNlcnQod29yZC5zbGljZShwcmVmaXgubGVuZ3RoKSwgbm9kZS5jaGlsZChwcm9wKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHVwbGljYXRlIHRlcm1pbmFsIHN0cmluZyAtIGlnbm9yZVxuICAgICAgICAgICAgaWYgKHByb3AgPT09IHdvcmQgJiYgbm9kZS5pc1Rlcm1pbmFsU3RyaW5nKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV4dCA9IG5ldyBub2RlXzEuTm9kZSgpO1xuICAgICAgICAgICAgbmV4dC5zZXRDaGlsZChwcm9wLnNsaWNlKHByZWZpeC5sZW5ndGgpLCBub2RlLmNoaWxkKHByb3ApKTtcbiAgICAgICAgICAgIHRoaXMuYWRkVGVybWluYWwobmV4dCwgd29yZCA9IHdvcmQuc2xpY2UocHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgbm9kZS5kZWxldGVDaGlsZChwcm9wKTtcbiAgICAgICAgICAgIG5vZGUuc2V0Q2hpbGQocHJlZml4LCBuZXh0KTtcbiAgICAgICAgICAgIHRoaXMud29yZENvdW50Kys7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm8gc2hhcmVkIHByZWZpeC4gIEVudGVyIHRoZSB3b3JkIGhlcmUgYXMgYSB0ZXJtaW5hbCBzdHJpbmcuXG4gICAgICAgIHRoaXMuYWRkVGVybWluYWwobm9kZSwgd29yZCk7XG4gICAgICAgIHRoaXMud29yZENvdW50Kys7XG4gICAgfTtcbiAgICAvLyBBZGQgYSB0ZXJtaW5hbCBzdHJpbmcgdG8gbm9kZS5cbiAgICAvLyBJZiAyIGNoYXJhY3RlcnMgb3IgbGVzcywganVzdCBhZGQgd2l0aCB2YWx1ZSA9PT0gMS5cbiAgICAvLyBJZiBtb3JlIHRoYW4gMiBjaGFyYWN0ZXJzLCBwb2ludCB0byBzaGFyZWQgbm9kZVxuICAgIC8vIE5vdGUgLSBkb24ndCBwcmVtYXR1cmVseSBzaGFyZSBzdWZmaXhlcyAtIHRoZXNlXG4gICAgLy8gdGVybWluYWxzIG1heSBiZWNvbWUgc3BsaXQgYW5kIGpvaW5lZCB3aXRoIG90aGVyXG4gICAgLy8gbm9kZXMgaW4gdGhpcyBwYXJ0IG9mIHRoZSB0cmVlLlxuICAgIFRyaWUucHJvdG90eXBlLmFkZFRlcm1pbmFsID0gZnVuY3Rpb24gKG5vZGUsIHByb3ApIHtcbiAgICAgICAgaWYgKHByb3AubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgIG5vZGUuc2V0Q2hpbGQocHJvcCwgMSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5leHQgPSBuZXcgbm9kZV8xLk5vZGUoKTtcbiAgICAgICAgbm9kZS5zZXRDaGlsZChwcm9wWzBdLCBuZXh0KTtcbiAgICAgICAgdGhpcy5hZGRUZXJtaW5hbChuZXh0LCBwcm9wLnNsaWNlKDEpKTtcbiAgICB9O1xuICAgIFRyaWUucHJvdG90eXBlLm9wdGltaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2NvcmVzID0gW107XG4gICAgICAgIHRoaXMuY29tYmluZVN1ZmZpeE5vZGUodGhpcy5yb290KTtcbiAgICAgICAgdGhpcy5wcmVwREZTKCk7XG4gICAgICAgIHRoaXMuY291bnREZWdyZWUodGhpcy5yb290KTtcbiAgICAgICAgdGhpcy5wcmVwREZTKCk7XG4gICAgICAgIHRoaXMuY29sbGFwc2VDaGFpbnModGhpcy5yb290KTtcbiAgICB9O1xuICAgIC8vIENvbnZlcnQgVHJpZSB0byBhIERBV0cgYnkgc2hhcmluZyBpZGVudGljYWwgbm9kZXNcbiAgICBUcmllLnByb3RvdHlwZS5jb21iaW5lU3VmZml4Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIC8vIEZyb3plbiBub2RlIC0gY2FuJ3QgY2hhbmdlLlxuICAgICAgICBpZiAobm9kZS5fYykge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFrZSBzdXJlIGFsbCBjaGlsZHJlbiBhcmUgY29tYmluZWQgYW5kIGdlbmVyYXRlIHVuaXF1ZSBub2RlXG4gICAgICAgIC8vIHNpZ25hdHVyZSBmb3IgdGhpcyBub2RlLlxuICAgICAgICB2YXIgc2lnID0gW107XG4gICAgICAgIGlmIChub2RlLmlzVGVybWluYWwoKSkge1xuICAgICAgICAgICAgc2lnLnB1c2goJyEnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvcHMgPSBub2RlLnByb3BzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwcm9wID0gcHJvcHNbaV07XG4gICAgICAgICAgICBpZiAobm9kZV8xLk5vZGUuaXNOb2RlKG5vZGUuY2hpbGQocHJvcCkpKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRDaGlsZChwcm9wLCB0aGlzLmNvbWJpbmVTdWZmaXhOb2RlKG5vZGUuY2hpbGQocHJvcCkpKTtcbiAgICAgICAgICAgICAgICBzaWcucHVzaChwcm9wKTtcbiAgICAgICAgICAgICAgICBzaWcucHVzaChub2RlLmNoaWxkKHByb3ApLl9jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNpZy5wdXNoKHByb3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzaWdTdHJpbmcgPSBzaWcuam9pbignLScpO1xuICAgICAgICB2YXIgc2hhcmVkID0gdGhpcy5zdWZmaXhlc1tzaWdTdHJpbmddO1xuICAgICAgICBpZiAoc2hhcmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gc2hhcmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3VmZml4ZXNbc2lnU3RyaW5nXSA9IG5vZGU7XG4gICAgICAgIG5vZGUuX2MgPSB0aGlzLmNOZXh0Kys7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG4gICAgVHJpZS5wcm90b3R5cGUucHJlcERGUyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy52Q3VyKys7XG4gICAgfTtcbiAgICBUcmllLnByb3RvdHlwZS52aXNpdGVkID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUuX3YgPT09IHRoaXMudkN1cikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5fdiA9IHRoaXMudkN1cjtcbiAgICB9O1xuICAgIFRyaWUucHJvdG90eXBlLmNvdW50RGVncmVlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUuX2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbm9kZS5fZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5fZCsrO1xuICAgICAgICBpZiAodGhpcy52aXNpdGVkKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb3BzID0gbm9kZS5wcm9wcyh0cnVlKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jb3VudERlZ3JlZShub2RlLmNoaWxkKHByb3BzW2ldKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIFJlbW92ZSBpbnRlcm1lZGlhdGUgc2luZ2xldG9uIG5vZGVzIGJ5IGhvaXN0aW5nIGludG8gdGhlaXIgcGFyZW50XG4gICAgVHJpZS5wcm90b3R5cGUuY29sbGFwc2VDaGFpbnMgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICB2YXIgcHJvcCA9ICctaW52YWxpZC0nO1xuICAgICAgICB2YXIgcHJvcHM7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpZiAodGhpcy52aXNpdGVkKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcHJvcHMgPSBub2RlLnByb3BzKCk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5jaGlsZChwcm9wKTtcbiAgICAgICAgICAgIGlmICghbm9kZV8xLk5vZGUuaXNOb2RlKGNoaWxkKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUNoYWlucyhjaGlsZCk7XG4gICAgICAgICAgICAvLyBIb2lzdCB0aGUgc2luZ2xldG9uIGNoaWxkJ3Mgc2luZ2xlIHByb3BlcnR5IHRvIHRoZSBwYXJlbnRcbiAgICAgICAgICAgIGlmIChjaGlsZC5fZyAhPT0gdW5kZWZpbmVkICYmIChjaGlsZC5fZCA9PT0gMSB8fCBjaGlsZC5fZy5sZW5ndGggPT09IDEpKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5kZWxldGVDaGlsZChwcm9wKTtcbiAgICAgICAgICAgICAgICBwcm9wICs9IGNoaWxkLl9nO1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0Q2hpbGQocHJvcCwgY2hpbGQuY2hpbGQoY2hpbGQuX2cpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZGVudGlmeSBzaW5nbGV0b24gbm9kZXNcbiAgICAgICAgaWYgKHByb3BzLmxlbmd0aCA9PT0gMSAmJiAhbm9kZS5pc1Rlcm1pbmFsKCkpIHtcbiAgICAgICAgICAgIG5vZGUuX2cgPSBwcm9wO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUcmllLnByb3RvdHlwZS5pc1dvcmQgPSBmdW5jdGlvbiAod29yZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0ZyYWdtZW50KHdvcmQsIHRoaXMucm9vdCk7XG4gICAgfTtcbiAgICBUcmllLnByb3RvdHlwZS5pc0ZyYWdtZW50ID0gZnVuY3Rpb24gKHdvcmQsIG5vZGUpIHtcbiAgICAgICAgaWYgKHdvcmQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5pc1Rlcm1pbmFsKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUuY2hpbGQod29yZCkgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpbmQgYSBwcmVmaXggb2Ygd29yZCByZWZlcmVuY2UgdG8gYSBjaGlsZFxuICAgICAgICB2YXIgcHJvcHMgPSBub2RlLnByb3BzKHRydWUpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgICAgICAgaWYgKHByb3AgPT09IHdvcmQuc2xpY2UoMCwgcHJvcC5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNGcmFnbWVudCh3b3JkLnNsaWNlKHByb3AubGVuZ3RoKSwgbm9kZS5jaGlsZChwcm9wKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLy8gRmluZCBoaWdoZXN0IG5vZGUgaW4gVHJpZSB0aGF0IGlzIG9uIHRoZSBwYXRoIHRvIHdvcmRcbiAgICAvLyBhbmQgdGhhdCBpcyBOT1Qgb24gdGhlIHBhdGggdG8gb3RoZXIuXG4gICAgVHJpZS5wcm90b3R5cGUudW5pcXVlTm9kZSA9IGZ1bmN0aW9uICh3b3JkLCBvdGhlciwgbm9kZSkge1xuICAgICAgICB2YXIgcHJvcHMgPSBub2RlLnByb3BzKHRydWUpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgICAgICAgaWYgKHByb3AgPT09IHdvcmQuc2xpY2UoMCwgcHJvcC5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3AgIT09IG90aGVyLnNsaWNlKDAsIHByb3AubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5jaGlsZChwcm9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudW5pcXVlTm9kZSh3b3JkLnNsaWNlKHByb3AubGVuZ3RoKSwgb3RoZXIuc2xpY2UocHJvcC5sZW5ndGgpLCBub2RlLmNoaWxkKHByb3ApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLy8gUmV0dXJuIHBhY2tlZCByZXByZXNlbnRhdGlvbiBvZiBUcmllIGFzIGEgc3RyaW5nLlxuICAgIC8vXG4gICAgLy8gRWFjaCBub2RlIG9mIHRoZSBUcmllIGlzIG91dHB1dCBvbiBhIHNpbmdsZSBsaW5lLlxuICAgIC8vXG4gICAgLy8gRm9yIGV4YW1wbGUgVHJpZShcInRoZSB0aGVtIHRoZXJlIHRoZXNpcyB0aGlzXCIpOlxuICAgIC8vIHtcbiAgICAvLyAgICBcInRoXCI6IHtcbiAgICAvLyAgICAgIFwiaXNcIjogMSxcbiAgICAvLyAgICAgIFwiZVwiOiB7XG4gICAgLy8gICAgICAgIFwiXCI6IDEsXG4gICAgLy8gICAgICAgIFwibVwiOiAxLFxuICAgIC8vICAgICAgICBcInJlXCI6IDEsXG4gICAgLy8gICAgICAgIFwic2lzXCI6IDFcbiAgICAvLyAgICAgIH1cbiAgICAvLyAgICB9XG4gICAgLy8gIH1cbiAgICAvL1xuICAgIC8vIFdvdWxkIGJlIHJlcGVyZXNlbnRlZCBhczpcbiAgICAvL1xuICAgIC8vIHRoMFxuICAgIC8vIGUwaXNcbiAgICAvLyAhbSxyZSxzaXNcbiAgICAvL1xuICAgIC8vIFRoZSBsaW5lIGJlZ2lucyB3aXRoIGEgJyEnIGlmZiBpdCBpcyBhIHRlcm1pbmFsIG5vZGUgb2YgdGhlIFRyaWUuXG4gICAgLy8gRm9yIGVhY2ggc3RyaW5nIHByb3BlcnR5IGluIGEgbm9kZSwgdGhlIHN0cmluZyBpcyBsaXN0ZWQsIGFsb25nXG4gICAgLy8gd2l0aCBhIChyZWxhdGl2ZSEpIGxpbmUgbnVtYmVyIG9mIHRoZSBub2RlIHRoYXQgc3RyaW5nIHJlZmVyZW5jZXMuXG4gICAgLy8gVGVybWluYWwgc3RyaW5ncyAodGhvc2Ugd2l0aG91dCBjaGlsZCBub2RlIHJlZmVyZW5jZXMpIGFyZVxuICAgIC8vIHNlcGFyYXRlZCBieSAnLCcgY2hhcmFjdGVycy5cbiAgICBUcmllLnByb3RvdHlwZS5wYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBub2RlcyA9IFtdO1xuICAgICAgICB2YXIgbm9kZUNvdW50O1xuICAgICAgICB2YXIgc3ltcyA9IHt9O1xuICAgICAgICB2YXIgcG9zID0gMDtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlJ3ZlIGNvbWJpbmVkIGFsbCB0aGUgY29tbW9uIHN1ZmZpeGVzXG4gICAgICAgIHRoaXMub3B0aW1pemUoKTtcbiAgICAgICAgZnVuY3Rpb24gbm9kZUxpbmUobm9kZSkge1xuICAgICAgICAgICAgdmFyIGxpbmUgPSAnJztcbiAgICAgICAgICAgIHZhciBzZXAgPSAnJztcbiAgICAgICAgICAgIGlmIChub2RlLmlzVGVybWluYWwoKSkge1xuICAgICAgICAgICAgICAgIGxpbmUgKz0gcHRyaWUuVEVSTUlOQUxfUFJFRklYO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByb3BzID0gbm9kZS5wcm9wcygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gcHJvcHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuaXNUZXJtaW5hbFN0cmluZyhwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICBsaW5lICs9IHNlcCArIHByb3A7XG4gICAgICAgICAgICAgICAgICAgIHNlcCA9IHB0cmllLlNUUklOR19TRVA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBub2RlLmNoaWxkKHByb3ApO1xuICAgICAgICAgICAgICAgIGlmIChzeW1zW2NoaWxkLl9uXSkge1xuICAgICAgICAgICAgICAgICAgICBsaW5lICs9IHNlcCArIHByb3AgKyBzeW1zW2NoaWxkLl9uXTtcbiAgICAgICAgICAgICAgICAgICAgc2VwID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcmVmID0gYWxwaGFjb2RlXzEudG9BbHBoYUNvZGUobm9kZS5fbiAtIGNoaWxkLl9uIC0gMSArIHN5bUNvdW50KTtcbiAgICAgICAgICAgICAgICAvLyBMYXJnZSByZWZlcmVuY2UgdG8gc21hbGxlciBzdHJpbmcgc3VmZml4IC0+IGR1cGxpY2F0ZSBzdWZmaXhcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuX2cgJiYgcmVmLmxlbmd0aCA+PSBjaGlsZC5fZy5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5pc1Rlcm1pbmFsU3RyaW5nKGNoaWxkLl9nKSkge1xuICAgICAgICAgICAgICAgICAgICByZWYgPSBjaGlsZC5fZztcbiAgICAgICAgICAgICAgICAgICAgbGluZSArPSBzZXAgKyBwcm9wICsgcmVmO1xuICAgICAgICAgICAgICAgICAgICBzZXAgPSBwdHJpZS5TVFJJTkdfU0VQO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGluZSArPSBzZXAgKyBwcm9wICsgcmVmO1xuICAgICAgICAgICAgICAgIHNlcCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxpbmU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVG9wb2xvZ2ljYWwgc29ydCBpbnRvIG5vZGVzIGFycmF5XG4gICAgICAgIGZ1bmN0aW9uIG51bWJlck5vZGVzKG5vZGUpIHtcbiAgICAgICAgICAgIGlmIChub2RlLl9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJvcHMgPSBub2RlLnByb3BzKHRydWUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIG51bWJlck5vZGVzKG5vZGUuY2hpbGQocHJvcHNbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuX24gPSBwb3MrKztcbiAgICAgICAgICAgIG5vZGVzLnVuc2hpZnQobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhpc3RBYnMgPSBuZXcgaGlzdG9ncmFtXzEuSGlzdG9ncmFtKCk7XG4gICAgICAgIHZhciBoaXN0UmVsID0gbmV3IGhpc3RvZ3JhbV8xLkhpc3RvZ3JhbSgpO1xuICAgICAgICBmdW5jdGlvbiBhbmFseXplUmVmcyhub2RlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi52aXNpdGVkKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByb3BzID0gbm9kZS5wcm9wcyh0cnVlKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IG5vZGUuY2hpbGQocHJvcCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlZiA9IG5vZGUuX24gLSBjaGlsZC5fbiAtIDE7XG4gICAgICAgICAgICAgICAgLy8gQ291bnQgdGhlIG51bWJlciBvZiBzaW5nbGUtY2hhcmFjdGVyIHJlbGF0aXZlIHJlZnNcbiAgICAgICAgICAgICAgICBpZiAocmVmIDwgYWxwaGFjb2RlXzEuQkFTRSkge1xuICAgICAgICAgICAgICAgICAgICBoaXN0UmVsLmFkZChyZWYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgc2F2ZWQgYnkgY29udmVydGluZyBhbiBhYnNvbHV0ZVxuICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byBhIG9uZS1jaGFyYWN0ZXIgc3ltYm9sLlxuICAgICAgICAgICAgICAgIGhpc3RBYnMuYWRkKGNoaWxkLl9uLCBhbHBoYWNvZGVfMS50b0FscGhhQ29kZShyZWYpLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIGFuYWx5emVSZWZzKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzeW1ib2xDb3VudCgpIHtcbiAgICAgICAgICAgIHZhciB0b3BOb2RlcyA9IGhpc3RBYnMuaGlnaGVzdChhbHBoYWNvZGVfMS5CQVNFKTtcbiAgICAgICAgICAgIHZhciBzYXZpbmdzID0gW107XG4gICAgICAgICAgICBzYXZpbmdzWy0xXSA9IDA7XG4gICAgICAgICAgICB2YXIgYmVzdCA9IDA7XG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIGRlZlNpemUgPSAzICsgYWxwaGFjb2RlXzEudG9BbHBoYUNvZGUobm9kZUNvdW50KS5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBzeW0gPSAwOyBzeW0gPCBhbHBoYWNvZGVfMS5CQVNFOyBzeW0rKykge1xuICAgICAgICAgICAgICAgIGlmICh0b3BOb2Rlc1tzeW1dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEN1bXVsYXRpdmUgc2F2aW5ncyBvZjpcbiAgICAgICAgICAgICAgICAvLyAgIHNhdmVkIGNoYXJhY3RlcnMgaW4gcmVmc1xuICAgICAgICAgICAgICAgIC8vICAgbWludXMgZGVmaW5pdGlvbiBzaXplXG4gICAgICAgICAgICAgICAgLy8gICBtaW51cyByZWxhdGl2ZSBzaXplIHdyYXBwaW5nIHRvIDIgZGlnaXRzXG4gICAgICAgICAgICAgICAgc2F2aW5nc1tzeW1dID0gdG9wTm9kZXNbc3ltXVsxXSAtIGRlZlNpemUgLVxuICAgICAgICAgICAgICAgICAgICBoaXN0UmVsLmNvdW50T2YoYWxwaGFjb2RlXzEuQkFTRSAtIHN5bSAtIDEpICtcbiAgICAgICAgICAgICAgICAgICAgc2F2aW5nc1tzeW0gLSAxXTtcbiAgICAgICAgICAgICAgICBsb2coXCJzYXZpbmdzW1wiICsgc3ltICsgXCJdIFwiICsgc2F2aW5nc1tzeW1dICsgJyA9ICcgK1xuICAgICAgICAgICAgICAgICAgICBzYXZpbmdzW3N5bSAtIDFdICsgJyArJyArXG4gICAgICAgICAgICAgICAgICAgIHRvcE5vZGVzW3N5bV1bMV0gKyAnIC0gJyArIGRlZlNpemUgKyAnIC0gJyArXG4gICAgICAgICAgICAgICAgICAgIGhpc3RSZWwuY291bnRPZihhbHBoYWNvZGVfMS5CQVNFIC0gc3ltIC0gMSkgKyAnKScpO1xuICAgICAgICAgICAgICAgIGlmIChzYXZpbmdzW3N5bV0gPj0gYmVzdCkge1xuICAgICAgICAgICAgICAgICAgICBiZXN0ID0gc2F2aW5nc1tzeW1dO1xuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IHN5bSArIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtjb3VudCwgdG9wTm9kZXNdO1xuICAgICAgICB9XG4gICAgICAgIG51bWJlck5vZGVzKHRoaXMucm9vdCk7XG4gICAgICAgIG5vZGVDb3VudCA9IG5vZGVzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5wcmVwREZTKCk7XG4gICAgICAgIGFuYWx5emVSZWZzKHRoaXMucm9vdCk7XG4gICAgICAgIHZhciBfYSA9IHN5bWJvbENvdW50KCksIHN5bUNvdW50ID0gX2FbMF0sIHRvcE5vZGVzID0gX2FbMV07XG4gICAgICAgIHZhciBzeW1EZWZzID0gW107XG4gICAgICAgIGZvciAodmFyIHN5bSA9IDA7IHN5bSA8IHN5bUNvdW50OyBzeW0rKykge1xuICAgICAgICAgICAgc3ltc1t0b3BOb2Rlc1tzeW1dWzBdXSA9IGFscGhhY29kZV8xLnRvQWxwaGFDb2RlKHN5bSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vZGVMaW5lcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBub2RlTGluZXNbaV0gPSBub2RlTGluZShub2Rlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJlcGVuZCBzeW1ib2xzXG4gICAgICAgIGZvciAodmFyIHN5bSA9IHN5bUNvdW50IC0gMTsgc3ltID49IDA7IHN5bS0tKSB7XG4gICAgICAgICAgICBub2RlTGluZXMudW5zaGlmdChhbHBoYWNvZGVfMS50b0FscGhhQ29kZShzeW0pICsgJzonICtcbiAgICAgICAgICAgICAgICBhbHBoYWNvZGVfMS50b0FscGhhQ29kZShub2RlQ291bnQgLVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh0b3BOb2Rlc1tzeW1dWzBdLCAxMCkgLSAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGVMaW5lcy5qb2luKHB0cmllLk5PREVfU0VQKTtcbiAgICB9O1xuICAgIHJldHVybiBUcmllO1xufSgpKTtcbmV4cG9ydHMuVHJpZSA9IFRyaWU7XG5mdW5jdGlvbiBjb21tb25QcmVmaXgodzEsIHcyKSB7XG4gICAgdmFyIGk7XG4gICAgdmFyIG1heGxlbiA9IE1hdGgubWluKHcxLmxlbmd0aCwgdzIubGVuZ3RoKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbWF4bGVuICYmIHcxW2ldID09PSB3MltpXTsgaSsrKSB7IH1cbiAgICByZXR1cm4gdzEuc2xpY2UoMCwgaSk7XG59XG5mdW5jdGlvbiBsb2cobWVzc2FnZSkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKERFQlVHKSB7XG4gICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIFttZXNzYWdlXS5jb25jYXQoYXJncykpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyaWUuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xudmFyIHV0aWxfMSA9IHJlcXVpcmUoXCIuL3V0aWxcIik7XG52YXIgSGlzdG9ncmFtID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIaXN0b2dyYW0oKSB7XG4gICAgICAgIHRoaXMuY291bnRzID0ge307XG4gICAgfVxuICAgIEhpc3RvZ3JhbS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChrZXksIG4pIHtcbiAgICAgICAgaWYgKG4gPT09IHZvaWQgMCkgeyBuID0gMDsgfVxuICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGtleSA9IGtleS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvdW50c1trZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY291bnRzW2tleV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY291bnRzW2tleV0gKz0gbjtcbiAgICB9O1xuICAgIEhpc3RvZ3JhbS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGtleSwgbikge1xuICAgICAgICBpZiAobiA9PT0gdm9pZCAwKSB7IG4gPSAxOyB9XG4gICAgICAgIHRoaXMuaW5pdChrZXksIG4pO1xuICAgIH07XG4gICAgSGlzdG9ncmFtLnByb3RvdHlwZS5jb3VudE9mID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB0aGlzLmluaXQoa2V5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY291bnRzW2tleV07XG4gICAgfTtcbiAgICBIaXN0b2dyYW0ucHJvdG90eXBlLmhpZ2hlc3QgPSBmdW5jdGlvbiAodG9wKSB7XG4gICAgICAgIHJldHVybiB1dGlsXzEuc29ydEJ5VmFsdWVzKHRoaXMuY291bnRzLCAnZGVzYycpLnNsaWNlKDAsIHRvcCk7XG4gICAgfTtcbiAgICByZXR1cm4gSGlzdG9ncmFtO1xufSgpKTtcbmV4cG9ydHMuSGlzdG9ncmFtID0gSGlzdG9ncmFtO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGlzdG9ncmFtLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbi8qXG4gIE5vZGVcblxuICBFYWNoIG5vZGUgY29udGFpbnMgc29tZSBzcGVjaWFsIHByb3BlcnRpZXMgKGJlZ2luaW5nIHdpdGggJ18nKSwgYXMgd2VsbCBhc1xuICBhcmJpdHJhcnkgc3RyaW5nIHByb3BlcnRpZXMgZm9yIHN0cmluZyBmcmFnbWVudHMgY29udGFpbmVkIGluIHRoZSBpbnB1dCB3b3JkXG4gIGRpY3Rpb25hcnkuXG5cbiAgU3RyaW5nIHByb3BlcnRpZXMgY2FuIGJlIFwidGVybWluYWxcIiAoaGF2ZSBhIG51bWVyaWMgdmFsdWUgb2YgMSksIG9yIGNhblxuICByZWZlcmFuY2UgYW5vdGhlciBjaGlsZCBOb2RlLlxuXG4gIE5vdGUgdGhhdCBhIE5vZGUgY29udGFpbmluZyBhIHRlcm1pbmFsICcnIChlbXB0eSBzdHJpbmcpIHByb3BlcnR5LCBpcyBpdHNlbGZcbiAgbWFya2VkIGFzIGEgdGVybWluYWwgTm9kZSAodGhlIHByZWZpeCBsZWFkaW5nIHRvIHRoaXMgbm9kZSBpcyBhIHdvcmQgaW4gdGhlXG4gIGRpY3Rpb25hcnkuXG4qL1xudmFyIE5vZGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5vZGUoKSB7XG4gICAgICAgIC8vIE51bWJlciBvZiBjaGlsZCBwcm9wZXJ0aWVzLlxuICAgICAgICB0aGlzLl9wID0gMDtcbiAgICB9XG4gICAgTm9kZS5wcm90b3R5cGUuY2hpbGQgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICByZXR1cm4gdGhpc1twcm9wXTtcbiAgICB9O1xuICAgIE5vZGUucHJvdG90eXBlLnNldENoaWxkID0gZnVuY3Rpb24gKHByb3AsIHZhbHVlKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgaWYgKHByb3AgIT09IHRoaXMuX2cpIHtcbiAgICAgICAgICAgIC8vIGRlbGV0ZSBzZWxmLl9nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmW3Byb3BdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3AgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fcCA9PT0gMSkge1xuICAgICAgICAgICAgLy8gdGhpcy5fZyA9IHByb3A7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZltwcm9wXSA9IHZhbHVlO1xuICAgIH07XG4gICAgTm9kZS5wcm90b3R5cGUuZGVsZXRlQ2hpbGQgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmIChwcm9wID09PSB0aGlzLl9nKSB7XG4gICAgICAgICAgICAvLyBkZWxldGUgdGhpcy5fZztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wIC09IDE7XG4gICAgICAgIGRlbGV0ZSBzZWxmW3Byb3BdO1xuICAgICAgICBpZiAodGhpcy5fcCA9PT0gMSkge1xuICAgICAgICAgICAgLy8gdGhpcy5fZyA9IHRoaXMucHJvcHMoKVswXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gQSBwcm9wZXJ0eSBpcyBhIHRlcm1pbmFsIHN0cmluZ1xuICAgIE5vZGUucHJvdG90eXBlLmlzVGVybWluYWxTdHJpbmcgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuY2hpbGQocHJvcCkgPT09ICdudW1iZXInO1xuICAgIH07XG4gICAgLy8gVGhpcyBub2RlIGlzIGEgdGVybWluYWwgbm9kZSAodGhlIHByZWZpeCBzdHJpbmcgaXMgYSB3b3JkIGluIHRoZVxuICAgIC8vIGRpY3Rpb25hcnkpLlxuICAgIE5vZGUucHJvdG90eXBlLmlzVGVybWluYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzVGVybWluYWxTdHJpbmcoJycpO1xuICAgIH07XG4gICAgLy8gV2VsbCBvcmRlcmVkIGxpc3Qgb2YgcHJvcGVydGllcyBpbiBhIG5vZGUgKHN0cmluZyBvciBvYmplY3QgcHJvcGVydGllcylcbiAgICAvLyBVc2Ugbm9kZXNPbmx5ID09PSB0cnVlIHRvIHJldHVybiBvbmx5IHByb3BlcnRpZXMgb2YgY2hpbGQgbm9kZXMgKG5vdFxuICAgIC8vIHRlcm1pbmFsIHN0cmluZ3MpLlxuICAgIE5vZGUucHJvdG90eXBlLnByb3BzID0gZnVuY3Rpb24gKG5vZGVzT25seSkge1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICB2YXIgcHJvcHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBtZSkge1xuICAgICAgICAgICAgaWYgKCFtZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3AgIT09ICcnICYmIHByb3BbMF0gIT09ICdfJykge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZXNPbmx5IHx8IE5vZGUuaXNOb2RlKHRoaXMuY2hpbGQocHJvcCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByb3BzLnNvcnQoKTtcbiAgICAgICAgcmV0dXJuIHByb3BzO1xuICAgIH07XG4gICAgLy8gQ29tcHV0ZSBpbi1kZWdyZWUgb2YgYWxsIG5vZGVzIGFuZCBtYXJrIHRoZVxuICAgIC8vIHNpbmdsZXRvbiBub2Rlcy5cbiAgICBOb2RlLmNvdW50RGVncmVlID0gZnVuY3Rpb24gKHJvb3QpIHtcbiAgICAgICAgdmFyIHdhbGtlciA9IG5ldyBXYWxrZXIocm9vdCk7XG4gICAgICAgIHdhbGtlci5kZnMoZnVuY3Rpb24gKG9yZGVyLCBub2RlKSB7XG4gICAgICAgICAgICBpZiAob3JkZXIgPT09ICdwb3N0Jykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub2RlLl9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBub2RlLl9kID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuX2QrKztcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvLyBOb2RlIGhhcyBqdXN0IGEgc2luZ2xlIChub24tc3BlY2lhbCkgcHJvcGVydHkuXG4gICAgTm9kZS5wcm90b3R5cGUuaXNTaW5nbGV0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wID09PSAxICYmICF0aGlzLmlzVGVybWluYWwoKTtcbiAgICB9O1xuICAgIC8vIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgYXMgYSBUeXBlIEd1YXJkIChUeXBlU2NyaXB0KVxuICAgIE5vZGUuaXNOb2RlID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgcmV0dXJuIG4gaW5zdGFuY2VvZiBOb2RlO1xuICAgIH07XG4gICAgcmV0dXJuIE5vZGU7XG59KCkpO1xuZXhwb3J0cy5Ob2RlID0gTm9kZTtcbnZhciBXYWxrZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFdhbGtlcihyb290KSB7XG4gICAgICAgIHRoaXMucm9vdCA9IHJvb3Q7XG4gICAgICAgIHRoaXMudmlzaXRNYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIFdhbGtlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudmlzaXRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgV2Fsa2VyLnByb3RvdHlwZS52aXNpdCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHRoaXMudmlzaXRNYXAuc2V0KG5vZGUsIHRydWUpO1xuICAgIH07XG4gICAgV2Fsa2VyLnByb3RvdHlwZS52aXNpdGVkID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlzaXRNYXAuZ2V0KG5vZGUpIHx8IGZhbHNlO1xuICAgIH07XG4gICAgV2Fsa2VyLnByb3RvdHlwZS5kZnMgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIHRoaXMuX2Rmcyh0aGlzLnJvb3QsIG51bGwsICcnLCBoYW5kbGVyKTtcbiAgICB9O1xuICAgIC8vIERlcHRoLWZpcnN0IHNlYXJjaCB2aWEgY2FsbGJhY2sgaGFuZGxlci5cbiAgICBXYWxrZXIucHJvdG90eXBlLl9kZnMgPSBmdW5jdGlvbiAobm9kZSwgcGFyZW50LCBwcm9wUGFyZW50LCBoYW5kbGVyKSB7XG4gICAgICAgIC8vIFRoZSBoYW5kbGVyIGNhbiBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMgZnJvbSBkaWZmZXJlbnQgcGFyZW50c1xuICAgICAgICAvLyBzaW5jZSBOb2RlcyBjYW4gZm9ybSBhIG11bHRpLWdyYXBoLlxuICAgICAgICBoYW5kbGVyKCdwcmUnLCBub2RlLCBwYXJlbnQsIHByb3BQYXJlbnQpO1xuICAgICAgICBpZiAodGhpcy52aXNpdGVkKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52aXNpdChub2RlKTtcbiAgICAgICAgdmFyIHByb3BzID0gbm9kZS5wcm9wcyh0cnVlKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBwcm9wc18xID0gcHJvcHM7IF9pIDwgcHJvcHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBwcm9wID0gcHJvcHNfMVtfaV07XG4gICAgICAgICAgICB0aGlzLl9kZnMobm9kZS5jaGlsZChwcm9wKSwgbm9kZSwgcHJvcCwgaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcigncG9zdCcsIG5vZGUsIHBhcmVudCwgcHJvcFBhcmVudCk7XG4gICAgfTtcbiAgICByZXR1cm4gV2Fsa2VyO1xufSgpKTtcbmV4cG9ydHMuV2Fsa2VyID0gV2Fsa2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9kZS5qcy5tYXAiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGRSB7XG4gIC8qKiBkZWZhdWx0IGJvYXJkIHNpemUgKi9cbiAgZ2V0IGRlZmF1bHRCb2FyZFNpemUoKSB7IHJldHVybiAxMTt9XG4gIC8qKiBwcm92aWRlcyBjdXJyZW50IGxldmVsIGJvYXJkIHNpemUgKi9cbiAgZ2V0IGJvYXJkU2l6ZSgpIHsgcmV0dXJuIHRoaXMuX2JvYXJkU2l6ZTt9XG4gIC8qKiBwcm92aWRlcyBjdXJyZW50IGxldmVsIHVzZWRXb3JkcyAqL1xuICBnZXQgdXNlZFdvcmRzKCkgeyByZXR1cm4gdGhpcy5fdXNlZFdvcmRzO31cbiAgLyoqIHByb3ZpZGVzIGN1cnJlbnQgbGV2ZWwgYm9hcmQgKi9cbiAgZ2V0IGJvYXJkKCkgeyByZXR1cm4gdGhpcy5fYm9hcmQ7fVxuICAvKiogcHJvdmlkZXMgY3VycmVudCBsZXZlbCBwb2ludHMgKi9cbiAgZ2V0IHBvaW50cygpIHtyZXR1cm4gdGhpcy5fcG9pbnRzO31cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhbiBpbnN0YW5zZSBvZiB0aGUgV29yZHMgQUkgRkUgbGlicmFyeVxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZW5kQm9hcmQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBCb2FyZChMZXZlbCkgd2l0aCBpbnRpYWwgY2VudGVyIHdvcmQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBib2FyZFNpemUgLSBCb2FyZCBTaXplLlxuICAgKi9cbiAgc3RhcnRCb2FyZChib2FyZFNpemUpIHtcbiAgICB0aGlzLmVuZEJvYXJkKCk7XG5cbiAgICB0aGlzLl9ib2FyZFNpemUgPSBib2FyZFNpemU7XG4gICAgdGhpcy5fY2xlYW5Cb2FyZCgpO1xuICB9XG4gIC8qKlxuICAgKiBFbmQgQm9hcmQoTGV2ZWwpLlxuICAgKiAtIGNsZWFuIHRoZSBib2FyZDtcbiAgICogLSBjbGVhbiB1c2VkIHdvcmRzO1xuICAgKi9cbiAgZW5kQm9hcmQoKSB7XG4gICAgdGhpcy5fcG9pbnRzID0gMDtcbiAgICB0aGlzLl9ib2FyZFNpemUgPSAwO1xuICAgIHRoaXMuX3VzZWRXb3JkcyA9IFtdO1xuXG4gICAgdGhpcy5fY2xlYW5Cb2FyZCgpO1xuICB9XG4gIC8qKlxuICAgKiBnZXQgYWxsIHBvc3NpYmxlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgb24gdGhlIGJvYXJkXG4gICAqIEByZXR1cm4ge0FycmF5fSAtIGFycmF5IG9mIHBvc3NpYmxlIHJlZyBleHAgc3RyaW5nc1xuICAgKi9cbiAgZ2V0UG9zc2libGVXb3JkUmVnRXhwKCkge1xuICAgIGxldCBhcnJheSA9IFtdO1xuXG4gICAgaWYgKCF0aGlzLl91c2VkV29yZHMubGVuZ3RoKSB7XG4gICAgICBhcnJheS5wdXNoKCdeKFthLXpdezMsJyArIE1hdGguY2VpbCh0aGlzLl9ib2FyZFNpemUgKiAwLjUpICsgJ30pJCcpO1xuICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH1cblxuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5fYm9hcmRTaXplOyB5KyspIHtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5fYm9hcmRTaXplOyB4KyspIHtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSB0aGlzLl9ib2FyZFt5XVt4XTtcblxuICAgICAgICBpZiAoIXRoaXMuX2lzQVN0cmluZyhlbGVtZW50KSkgY29udGludWU7XG5cbiAgICAgICAgbGV0IHJlZ0V4cCA9IHRoaXMuX2ZpbmRQb3NzaWJsZVJlZ0V4cCh4LCB5KTtcblxuICAgICAgICByZWdFeHAuZm9yRWFjaChlbGVtZW50PT57YXJyYXkucHVzaChlbGVtZW50KTt9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cbiAgLyoqXG4gICAqIGNoZWNrIGlmIHNlbGVjdGVkIGNlbGxzIGFyZSBwb3NzaWJsZSBmb3IgYSB3b3JkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFggLSBmaXJzdCBsZXR0ZXIgY29sdW1uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFkgLSBmaXJzdCBsZXR0ZXIgcm93XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmVydGljYWwgLSBpcyB3b3JkIHZlcnRpY2FsIG9yIGhvcml6b250YWxcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCAtIGFtb3VudCBvZiBzZWxlY3RlZCBjZWxsc1xuICAgKi9cbiAgY2hlY2tQb3NzaWJsZUNlbGxzKHN0YXJ0WCwgc3RhcnRZLCB2ZXJ0aWNhbCwgYW1vdW50KSB7XG4gICAgaWYgKHN0YXJ0WCA8IDAgfHwgc3RhcnRZIDwgMCB8fCAodmVydGljYWwgPyBzdGFydFkgOiBzdGFydFgpICsgYW1vdW50ID4gdGhpcy5fYm9hcmRTaXplKSByZXR1cm4gZmFsc2U7XG5cbiAgICBsZXQgYmxvY2tlcnNDb3VudGVyID0gMDtcbiAgICBsZXQgbGV0dGVyc0NvdW50ZXIgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbW91bnQ7IGkrKykge1xuICAgICAgbGV0IGNoZWNrWCA9IHZlcnRpY2FsID8gc3RhcnRYIDogc3RhcnRYICsgaTtcbiAgICAgIGxldCBjaGVja1kgPSB2ZXJ0aWNhbCA/IHN0YXJ0WSArIGkgOiBzdGFydFk7XG4gICAgICBsZXQgZWxlbWVudCA9IHRoaXMuX2JvYXJkW2NoZWNrWV1bY2hlY2tYXTtcblxuICAgICAgaWYgKHRoaXMuX2lzQVN0cmluZyhlbGVtZW50KSkgbGV0dGVyc0NvdW50ZXIrKztcbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQgPj0gMyB8fCB2ZXJ0aWNhbCAmJiBlbGVtZW50ID09PSAxIHx8ICF2ZXJ0aWNhbCAmJiBlbGVtZW50ID09PSAyKSBibG9ja2Vyc0NvdW50ZXIrKztcbiAgICB9XG5cbiAgICBpZiAodmVydGljYWwgJiYgc3RhcnRZICYmIHRoaXMuX2lzQVN0cmluZyh0aGlzLl9ib2FyZFtzdGFydFkgLSAxXVtzdGFydFhdKSkgYmxvY2tlcnNDb3VudGVyKys7XG4gICAgaWYgKCF2ZXJ0aWNhbCAmJiBzdGFydFggJiYgdGhpcy5faXNBU3RyaW5nKHRoaXMuX2JvYXJkW3N0YXJ0WV1bc3RhcnRYIC0gMV0pKSBibG9ja2Vyc0NvdW50ZXIrKztcblxuICAgIGlmIChsZXR0ZXJzQ291bnRlciA9PT0gYW1vdW50IHx8IGJsb2NrZXJzQ291bnRlciB8fCAhbGV0dGVyc0NvdW50ZXIgJiYgdGhpcy5fdXNlZFdvcmRzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKiBjaGVjayBpZiB3b3JkIGFscmVhZHkgd2FzIHVzZWQgb24gY3VycmVudCBib2FyZCAqL1xuICBpc1VzZWRXb3JkKHdvcmQpIHtcbiAgICBpZiAoIXdvcmQpIHJldHVybiBmYWxzZTtcbiAgICB3b3JkID0gd29yZC50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiAhdGhpcy5fdXNlZFdvcmRzIHx8IHRoaXMuX3VzZWRXb3Jkcy5maW5kKGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiBlbGVtZW50ID09PSB3b3JkOyB9KTtcbiAgfVxuICAvKipcbiAgICogQWRkcyBpbmNvbWUgd29yZCByYW5kb21seSB0byB0aGUgYm9hcmQgaWYgcG9zc2libGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHdvcmQgLSBpbmNvbWUgd29yZFxuICAgKiBAcmV0dXJuIHtib29sZWFufSAtIHdhcyB3b3JkIGFkZGVkIG9yIG5vdFxuICAgKi9cbiAgYWRkV29yZFJhbmRvbWx5KHdvcmQsIHBvaW50cyA9IDApIHtcbiAgICBpZiAoIXdvcmQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIXRoaXMuX3VzZWRXb3Jkcy5sZW5ndGgpIHtcbiAgICAgIGxldCB4ID0gTWF0aC5mbG9vcigodGhpcy5fYm9hcmRTaXplIC0gd29yZC5sZW5ndGgpICogMC41KTtcbiAgICAgIGxldCB5ID0gTWF0aC5jZWlsKHRoaXMuX2JvYXJkU2l6ZSAqIDAuNSk7XG5cbiAgICAgIHRoaXMuYWRkV29yZCh4LCB5LCB3b3JkLCBmYWxzZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuX2JvYXJkU2l6ZTsgeSsrKSB7XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuX2JvYXJkU2l6ZTsgeCsrKSB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gdGhpcy5fYm9hcmRbeV1beF07XG5cbiAgICAgICAgaWYgKCF0aGlzLl9pc0FTdHJpbmcoZWxlbWVudCkpIGNvbnRpbnVlO1xuXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB3b3JkLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgIGxldCBsZXR0ZXIgPSB3b3JkW2luZGV4XTtcblxuICAgICAgICAgIGlmIChsZXR0ZXIgPT09IGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICBsZXQgdmVydGljYWwgPSAhIWk7XG4gICAgICAgICAgICAgIGxldCBzZWFyY2hYID0gdmVydGljYWwgPyB4IDogKHggLSBpbmRleCkgO1xuICAgICAgICAgICAgICBsZXQgc2VhcmNoWSA9IHZlcnRpY2FsID8gKHkgLSBpbmRleCkgOiB5O1xuXG4gICAgICAgICAgICAgIGlmICh0aGlzLmFkZFdvcmQoc2VhcmNoWCwgc2VhcmNoWSwgd29yZCwgdmVydGljYWwsIHBvaW50cykpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcblxuICB9XG4gIC8qKlxuICAgKiBBZGQgV29yZCB0byB0aGUgYm9hcmQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFggLSBmaXJzdCBsZXR0ZXIgY29sdW1uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFkgLSBmaXJzdCBsZXR0ZXIgcm93XG4gICAqIEBwYXJhbSB7c3RyaW5nfSB3b3JkIC0gd29yZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZlcnRpY2FsIC0gaXMgd29yZCB2ZXJ0aWNhbCBvciBob3Jpem9udGFsXG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIHdhcyB3b3JkIGFkZGVkIG9yIG5vdC5cbiAgICovXG4gIGFkZFdvcmQoc3RhcnRYLCBzdGFydFksIHdvcmQsIHZlcnRpY2FsLCBwb2ludHMgPSAwKSB7XG4gICAgaWYgKCF3b3JkIHx8IHdvcmQubGVuZ3RoIDwgMykge1xuICAgICAgY29uc29sZS5sb2coJ3dvcmQgbGVuZ3RoIGlzIGxlc3MgdGhhbiAzIGxldHRlcnMhJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmNoZWNrUG9zc2libGVDZWxscyhzdGFydFgsIHN0YXJ0WSwgdmVydGljYWwsIHdvcmQubGVuZ3RoKSkge1xuICAgICAgY29uc29sZS5sb2coJ3Bvc3NpYmxlIGNlbGxzIGNoZWNrIGZhaWxlZCEnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1VzZWRXb3JkKHdvcmQpKSB7XG4gICAgICBjb25zb2xlLmxvZygnd29yZCBpcyBhbHJlYWR5IHVzZWQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2NoZWNrUG9zc2libGVMZXR0ZXJzKHN0YXJ0WCwgc3RhcnRZLCB3b3JkLCB2ZXJ0aWNhbCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdwb3NzaWJsZSBsZXR0ZXJzIGNoZWNrIGZhaWxlZCEnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCbG9ja2VycyBiYXNlZCBvbiBudW1iZXI6XG4gICAgICogMSAtIGZvciB2ZXJ0aWNhbFxuICAgICAqIDIgLSBmb3IgaG9yaXphbnRhbFxuICAgICAqIDMgLSBmb3IgYWxsXG4gICAgICogKi9cblxuICAgIFsuLi53b3JkXS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xuICAgICAgdmFyIGVsZW1lbnRZID0gc3RhcnRZICsgKHZlcnRpY2FsID8gaW5kZXggOiAwKTtcbiAgICAgIHZhciBlbGVtZW50WCA9IHN0YXJ0WCArICh2ZXJ0aWNhbCA/IDAgOiBpbmRleCk7XG5cbiAgICAgIHRoaXMuX2JvYXJkW2VsZW1lbnRZXVtlbGVtZW50WF0gPSBlbGVtZW50LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7XG4gICAgICAgIGxldCB0YXJnZXRYID0gZWxlbWVudFggKyAodmVydGljYWwgPyBpID8gMSA6IC0xIDogMCk7XG4gICAgICAgIGxldCB0YXJnZXRZID0gZWxlbWVudFkgKyAodmVydGljYWwgPyAwIDogaSA/IDEgOiAtMSk7XG5cbiAgICAgICAgaWYgKHRhcmdldFggPCAwIHx8IHRhcmdldFggPj0gdGhpcy5fYm9hcmRTaXplIHx8IHRhcmdldFkgPCAwIHx8IHRhcmdldFkgPj0gdGhpcy5fYm9hcmRTaXplKSBjb250aW51ZTtcbiAgICAgICAgbGV0IHRhcmdldEVsZW1lbnQgPSB0aGlzLl9ib2FyZFt0YXJnZXRZXVt0YXJnZXRYXTtcblxuICAgICAgICBpZiAodmVydGljYWwgJiYgIXRoaXMuX2lzQVZlcnRpY2FsQmxvY2tlcih0YXJnZXRFbGVtZW50KSkgdGhpcy5fYm9hcmRbdGFyZ2V0WV1bdGFyZ2V0WF0gKz0gMTtcbiAgICAgICAgaWYgKCF2ZXJ0aWNhbCAmJiAhdGhpcy5faXNBSG9yaXpvbnRhbEJsb2NrZXIodGFyZ2V0RWxlbWVudCkpIHRoaXMuX2JvYXJkW3RhcmdldFldW3RhcmdldFhdICs9IDI7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG5cbiAgICBpZiAodmVydGljYWwpIHtcbiAgICAgIGlmIChzdGFydFkpIHRoaXMuX2JvYXJkW3N0YXJ0WSAtIDFdW3N0YXJ0WF0gPSAzO1xuICAgICAgaWYgKHN0YXJ0WSArIHdvcmQubGVuZ3RoIDwgdGhpcy5fYm9hcmRTaXplKSB0aGlzLl9ib2FyZFtzdGFydFkgKyB3b3JkLmxlbmd0aF1bc3RhcnRYXSA9IDM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzdGFydFgpIHRoaXMuX2JvYXJkW3N0YXJ0WV1bc3RhcnRYIC0gMV0gPSAzO1xuICAgICAgaWYgKHN0YXJ0WCArIHdvcmQubGVuZ3RoIDwgdGhpcy5fYm9hcmRTaXplKSB0aGlzLl9ib2FyZFtzdGFydFldW3N0YXJ0WCArIHdvcmQubGVuZ3RoXSA9IDM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3VzZWRXb3JkcyAmJiB0aGlzLl91c2VkV29yZHMubGVuZ3RoID4gMSkgdGhpcy5fcG9pbnRzICs9IHBvaW50cztcblxuICAgIHRoaXMuX3VzZWRXb3Jkcy5wdXNoKHdvcmQpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgZ2V0SGludEZyb21Xb3Jkc0FycmF5KHdvcmRzKSB7XG4gICAgaWYgKCF3b3JkcyB8fCAhd29yZHMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICBsZXQgd29yZCA9IG51bGw7XG5cbiAgICBpZiAoIXRoaXMuX3VzZWRXb3Jkcy5sZW5ndGgpIHdvcmQgPSB3b3Jkc1swXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLl91c2VkV29yZHMuaW5kZXhPZih3b3Jkc1tpXSkgPCAwICYmIHdvcmRzLmxlbmd0aCA+IDMpIHtcbiAgICAgICAgd29yZCA9IHdvcmRzW2ldO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIH1cbiAgICByZXR1cm4gd29yZDtcbiAgfVxuICAvKipcbiAgICogUHJpdmF0ZSBtZXRob2RzXG4gICAqL1xuICAvKiogY2hlY2sgaWYgZWxlbWVudCBpcyBhIHN0cmluZyAqL1xuICBfaXNBU3RyaW5nKGVsZW1lbnQpIHsgcmV0dXJuIHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJzsgfVxuICAvKiogY2hlY2sgaWYgZWxlbWVudCBpcyBhIG51bWJlciAqL1xuICBfaXNBTnVtYmVyKGVsZW1lbnQpIHsgcmV0dXJuICF0aGlzLl9pc0FTdHJpbmcoZWxlbWVudCk7IH1cbiAgLyoqIGNoZWNrIGlmIGEgY2VsbCBpcyBhIHZlcnRpY2FsIGJsb2NrZXIgKi9cbiAgX2lzQVZlcnRpY2FsQmxvY2tlcihlbGVtZW50KSB7cmV0dXJuIHRoaXMuX2lzQVN0cmluZyhlbGVtZW50KSB8fCBlbGVtZW50ID09PSAxIHx8IGVsZW1lbnQgPj0gMzt9XG4gIC8qKiBjaGVjayBpZiBhIGNlbGwgaXMgYSBob3Jpem9udGFsIGJsb2NrZXIgKi9cbiAgX2lzQUhvcml6b250YWxCbG9ja2VyKGVsZW1lbnQpIHtyZXR1cm4gdGhpcy5faXNBU3RyaW5nKGVsZW1lbnQpIHx8IGVsZW1lbnQgPT09IDIgfHwgZWxlbWVudCA+PSAzO31cbiAgLyoqXG4gICAqIGNoZWNrIGlmIHdvcmQgbGV0dGVycyBpbnRlcnNlY3RzIGV4aXN0aW5nIGxldHRlcnNcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0WCAtIGZpcnN0IGxldHRlciBjb2x1bW5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0WSAtIGZpcnN0IGxldHRlciByb3dcbiAgICogQHBhcmFtIHtzdHJpbmd9IHdvcmQgIC0gd29yZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZlcnRpY2FsIC0gaXMgd29yZCB2ZXJ0aWNhbCBvciBob3Jpem9udGFsXG4gICAqL1xuICBfY2hlY2tQb3NzaWJsZUxldHRlcnMoc3RhcnRYLCBzdGFydFksIHdvcmQsIHZlcnRpY2FsID0gZmFsc2UpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBjaGVja1ggPSB2ZXJ0aWNhbCA/IHN0YXJ0WCA6IHN0YXJ0WCArIGk7XG4gICAgICBsZXQgY2hlY2tZID0gdmVydGljYWwgPyBzdGFydFkgKyBpIDogc3RhcnRZO1xuICAgICAgbGV0IGVsZW1lbnQgPSB0aGlzLl9ib2FyZFtjaGVja1ldW2NoZWNrWF07XG5cbiAgICAgIGlmICh0aGlzLl9pc0FTdHJpbmcoZWxlbWVudCkgJiYgZWxlbWVudCAhPT0gWy4uLndvcmRdW2ldKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqIGNsZWFuIGJvYXJkICovXG4gIF9jbGVhbkJvYXJkKCkge1xuICAgIHRoaXMuX2JvYXJkID0gW107XG5cbiAgICBpZiAoIXRoaXMuX2JvYXJkU2l6ZSkgcmV0dXJuO1xuXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0aGlzLl9ib2FyZFNpemU7IHkrKykge1xuICAgICAgbGV0IF9hcnJheSA9IFtdO1xuXG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuX2JvYXJkU2l6ZTsgeCsrKSB7XG4gICAgICAgIF9hcnJheS5wdXNoKDApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9ib2FyZC5wdXNoKF9hcnJheSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBTZWFyY2ggZm9yIHBvc3NpYmxlIHJlZ3VsYXIgZXByZXNzaW9ucyBmb3IgaW5jb21lIGNlbGxcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBzZWFyY2ggbGV0dGVyIGNvbHVtblxuICAgKiBAcGFyYW0ge251bWJlcn0geSAtIHNlYXJjaCBsZXR0ZXIgcm93XG4gICAqIEByZXR1cm4ge2FycmF5fSBvZiBwb3NzaWJsZSByZWd1bGFyIGV4cHJlc3Npb25zXG4gICAqL1xuICBfZmluZFBvc3NpYmxlUmVnRXhwKHgsIHkpIHtcbiAgICBsZXQgYXJyYXkgPSBbXTtcbiAgICBsZXQgdmVydGljYWwgPSBmYWxzZTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7XG4gICAgICB2ZXJ0aWNhbCA9ICEhaTtcbiAgICAgIGxldCByZWdFeHAgPSB0aGlzLl9nZW5lcmF0ZVJlZ0V4cCh4LCB5LCB2ZXJ0aWNhbCk7XG5cbiAgICAgIGlmIChyZWdFeHAgJiYgYXJyYXkuaW5kZXhPZihyZWdFeHApIDwgMCkgYXJyYXkucHVzaChyZWdFeHApO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cbiAgLyoqXG4gICAqIGdlbmVyYXRlIHBvc3NpYmxlIHJlZyBleHByZXNzaW9uIGZvciBpbmNvbWUgY2VsbFxuICAgKiBAcGFyYW0ge251bWJlcn0geCAtIGluY29tZSBjZWxsIGNvbHVtblxuICAgKiBAcGFyYW0ge251bWJlcn0geSAtIGluY29tZSBjZWxsIHJvd1xuICAgKiBAcGFyYW0ge251bWJlcn0gdmVydGljYWwgLSBpcyB2ZXJ0aWNhbCBvciBob3Jpem9udGFsXG4gICAqIEByZXR1cm4ge3N0cmluZyB8fCBudWxsfSAtIHN0cmluZyByZWd1bGFyIGV4cHJlc3Npb24gb3IgbnVsbFxuICAgKi9cbiAgX2dlbmVyYXRlUmVnRXhwKHgsIHksIHZlcnRpY2FsKSB7XG4gICAgbGV0IHJlZ0V4cCA9ICcnO1xuICAgIGxldCBpRGlmZiA9IE1hdGgubWF4KHRoaXMuX2JvYXJkU2l6ZSAtICh2ZXJ0aWNhbCA/IHkgOiB4KSwgdmVydGljYWwgPyB5IDogeCk7XG4gICAgbGV0IHdvcmRBcnJheSA9IG5ldyBBcnJheSh0aGlzLl9ib2FyZFNpemUpO1xuXG4gICAgd29yZEFycmF5W3ZlcnRpY2FsID8geSA6IHhdID0gdGhpcy5fYm9hcmRbeV1beF07XG4gICAgbGV0IGlzVG9wQmxvY2tlZCA9IGZhbHNlO1xuICAgIGxldCBpc0JvdHRvbUJsb2NrZWQgPSBmYWxzZTtcbiAgICBsZXQgbGV0dGVyc0NvdW50ZXIgPSAwO1xuXG4gICAgbGV0IGNoZWNrSWZCbG9ja2VyID0gKGVsZW1lbnQpID0+e1xuICAgICAgbGV0IGlzVmVydGljYWxCbG9ja2VyID0gdmVydGljYWwgJiYgdGhpcy5faXNBVmVydGljYWxCbG9ja2VyKGVsZW1lbnQpO1xuICAgICAgbGV0IGlzSG9yaXpvbnRhbEJsb2NrZXIgPSAhdmVydGljYWwgJiYgdGhpcy5faXNBSG9yaXpvbnRhbEJsb2NrZXIoZWxlbWVudCk7XG5cbiAgICAgIHJldHVybiAoaXNWZXJ0aWNhbEJsb2NrZXIgfHwgaXNIb3Jpem9udGFsQmxvY2tlcik7XG4gICAgfTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGlEaWZmOyBpKyspIHtcbiAgICAgIGxldCBsZXR0ZXJJRCA9IG51bGw7XG4gICAgICBsZXQgcHJldkxldHRlcklEID0gbnVsbDtcbiAgICAgIGxldCBlbGVtZW50ID0gbnVsbDtcblxuICAgICAgLy8gY2hlY2sgbW92ZW1lbnQgdG9wL2xlZnRcbiAgICAgIGlmICgodmVydGljYWwgPyB5IDogeCkgLSBpID49IDAgJiYgIWlzVG9wQmxvY2tlZCkge1xuICAgICAgICBlbGVtZW50ID0gdGhpcy5fYm9hcmRbdmVydGljYWwgPyAoeSAtIGkpIDogeV1bdmVydGljYWwgPyB4IDogKHggLSBpKV07XG4gICAgICAgIGxldHRlcklEID0gdmVydGljYWwgPyAoeSAtIGkpIDogKHggLSBpKTtcbiAgICAgICAgcHJldkxldHRlcklEID0gdmVydGljYWwgPyAoeSAtIGkgKyAxKSA6ICh4IC0gaSArIDEpO1xuXG4gICAgICAgIGlmIChjaGVja0lmQmxvY2tlcihlbGVtZW50KSkge1xuICAgICAgICAgIGlmICh0aGlzLl9pc0FTdHJpbmcoZWxlbWVudCkgJiYgIWxldHRlcnNDb3VudGVyKSB7XG4gICAgICAgICAgICB3b3JkQXJyYXlbbGV0dGVySURdID0gZWxlbWVudDtcbiAgICAgICAgICAgIGxldHRlcnNDb3VudGVyKys7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzVG9wQmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNBU3RyaW5nKGVsZW1lbnQpKSB3b3JkQXJyYXlbcHJldkxldHRlcklEXSA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdvcmRBcnJheVtsZXR0ZXJJRF0gPSAnW2Etel0nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGNoZWNrIG1vdmVtZW50IGJvdHRvbS9yaWdodFxuICAgICAgaWYgKCh2ZXJ0aWNhbCA/IHkgOiB4KSArIGkgPCB0aGlzLl9ib2FyZFNpemUgJiYgIWlzQm90dG9tQmxvY2tlZCkge1xuICAgICAgICBlbGVtZW50ID0gdGhpcy5fYm9hcmRbdmVydGljYWwgPyAoeSArIGkpIDogeV1bdmVydGljYWwgPyB4IDogKHggKyBpKV07XG4gICAgICAgIGxldHRlcklEID0gdmVydGljYWwgPyAoeSArIGkpIDogKHggKyBpKTtcbiAgICAgICAgcHJldkxldHRlcklEID0gdmVydGljYWwgPyAoeSArIGkgLSAxKSA6ICh4ICsgaSAtIDEpO1xuXG4gICAgICAgIGlmIChjaGVja0lmQmxvY2tlcihlbGVtZW50KSkge1xuICAgICAgICAgIGlmICh0aGlzLl9pc0FTdHJpbmcoZWxlbWVudCkgJiYgIWxldHRlcnNDb3VudGVyKSB7XG4gICAgICAgICAgICB3b3JkQXJyYXlbbGV0dGVySURdID0gZWxlbWVudDtcbiAgICAgICAgICAgIGxldHRlcnNDb3VudGVyKys7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzQm90dG9tQmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNBU3RyaW5nKGVsZW1lbnQpKSB3b3JkQXJyYXlbcHJldkxldHRlcklEXSA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdvcmRBcnJheVtsZXR0ZXJJRF0gPSAnW2Etel0nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZ2VlbmVyYXRlIHJlZ3VsYXIgZXhwcmVzc2lvblxuICAgIHJlZ0V4cCArPSAnXignO1xuICAgIGxldCBhbnlDb3VudGVyID0gMDtcbiAgICBsZXQgdG90YWxGcmVlQ291bnRlciA9IDA7XG5cbiAgICBsZXR0ZXJzQ291bnRlciA9IDA7XG4gICAgd29yZEFycmF5LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7XG4gICAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50ID09PSAnW2Etel0nKSBhbnlDb3VudGVyKys7XG4gICAgICBlbHNlIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGxldHRlcnNDb3VudGVyKys7XG5cbiAgICAgICAgaWYgKGxldHRlcnNDb3VudGVyID09PSAxKSByZWdFeHAgKz0gJ1thLXpdezAsJyArIGFueUNvdW50ZXIgKyAnfScgKyBlbGVtZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGVsc2UgaWYgKGxldHRlcnNDb3VudGVyID09PSAyKSByZWdFeHAgKz0gJ1thLXpdeycgKyBhbnlDb3VudGVyICsgJ30nICsgZWxlbWVudC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHRvdGFsRnJlZUNvdW50ZXIgKz0gYW55Q291bnRlcjtcbiAgICAgICAgYW55Q291bnRlciA9IDA7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG5cbiAgICB0b3RhbEZyZWVDb3VudGVyICs9IGFueUNvdW50ZXI7XG4gICAgaWYgKGFueUNvdW50ZXIpIHJlZ0V4cCArPSAnW2Etel17MCwnICsgYW55Q291bnRlciArICd9JztcblxuICAgIHJlZ0V4cCArPSAnKSQnO1xuXG4gICAgaWYgKCF0b3RhbEZyZWVDb3VudGVyKSByZWdFeHAgPSBudWxsO1xuXG4gICAgcmV0dXJuIHJlZ0V4cDtcblxuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9